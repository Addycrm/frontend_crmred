(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-959b902a"],{"206d":function(t,e,a){"use strict";a("79dc")},"49b0":function(t,e,a){"use strict";a.r(e);var n,r,s,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"newTransactions"}},[a("b-button",{staticClass:"btn__back",attrs:{variant:"primary"},on:{click:function(e){return t.backPage()}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"16",height:"16"}},[a("path",{attrs:{d:"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"}})]),a("span",[t._v("Volver")])]),a("div",{staticClass:"trans__header"},[t.dataTransactions?a("div",{staticClass:"trans__header-left"},[a("p",[t._v("Nueva Transacción")]),a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"10",heigth:"10"}},[a("path",{attrs:{d:"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"}})]),a("p",[t._v(t._s(t.dataTransactions.tContractId.name))]),a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"10",heigth:"10"}},[a("path",{attrs:{d:"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"}})]),a("p",[t._v(t._s(t.dataTransactions.Ttype.name))])]):t._e(),a("div",{staticClass:"trans__header-right"},[a("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.checkFieldsForm()}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"25",height:"25"}},[a("path",{attrs:{d:"M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0l57.4-43c23.9-59.8 79.7-103.3 146.3-109.8l13.9-10.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176V384c0 35.3 28.7 64 64 64H360.2C335.1 417.6 320 378.5 320 336c0-5.6 .3-11.1 .8-16.6l-26.4 19.8zM640 336a144 144 0 1 0 -288 0 144 144 0 1 0 288 0zm-76.7-43.3c6.2 6.2 6.2 16.4 0 22.6l-72 72c-6.2 6.2-16.4 6.2-22.6 0l-40-40c-6.2-6.2-6.2-16.4 0-22.6s16.4-6.2 22.6 0L480 353.4l60.7-60.7c6.2-6.2 16.4-6.2 22.6 0z"}})]),t._v(" Enviar para Aprobación ")])],1)]),a("section",{staticClass:"container__form"},[a("section",{staticClass:"form__transactions"},[a("div",{staticClass:"form__detail-money"},[a("h4",{staticClass:"title__form"},[t._v("Detalles")]),a("validation-observer",{ref:"formDetailsPayment"},[a("b-row",[a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"Precio",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"precioSale"}},[t._v("Precio")]),a("b-input-group",{attrs:{prepend:"$",append:"COP"},on:{input:function(e){return t.calculatorRateComission()}}},[a("Cleave",{staticClass:"form-control",class:{"is-invalid":n.length>0},attrs:{id:"price",raw:!0,options:t.numberFormat},model:{value:t.formCreate.price,callback:function(e){t.$set(t.formCreate,"price",e)},expression:"formCreate.price"}})],1)],1)]}}])})],1),a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"Fecha venta",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"dateSale"}},[t._v("Fecha Venta")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formCreate.saleDate,expression:"formCreate.saleDate"}],attrs:{id:"dateSale",type:"hidden"},domProps:{value:t.formCreate.saleDate},on:{input:function(e){e.target.composing||t.$set(t.formCreate,"saleDate",e.target.value)}}}),a("flat-pickr",{staticClass:"form-control",attrs:{name:"fecha",config:{enableTime:!1,time_24hr:!1,locale:t.locale,dateFormat:"Y-m-d",plugins:t.plugins}},model:{value:t.formCreate.saleDate,callback:function(e){t.$set(t.formCreate,"saleDate",e)},expression:"formCreate.saleDate"}})],1)]}}])})],1),t.optionsTransactions?a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"Lado de Transacción",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"transaccion"}},[t._v("Lado de Transacción")]),a("v-select",{attrs:{id:"transaccion",autocomplete:"off",label:"name",options:t.optionsTransactions,reduce:function(t){return t.id}},model:{value:t.formCreate.transactionSide,callback:function(e){t.$set(t.formCreate,"transactionSide",e)},expression:"formCreate.transactionSide"}})],1)]}}],null,!1,2102823736)})],1):t._e(),a("b-col",{attrs:{md:"6",lg:"2"}},[a("validation-provider",{attrs:{name:"Tasa Comision",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"rateNumber"}},[t._v("Tasa Comision")]),a("b-input-group",{attrs:{append:"%"},on:{input:function(e){return t.calculatorRateComission("rateComssion")}}},[a("b-form-input",{staticClass:"form-control",attrs:{id:"rateNumber",state:!(n.length>0)&&null},model:{value:t.formCreate.commissionRate,callback:function(e){t.$set(t.formCreate,"commissionRate",e)},expression:"formCreate.commissionRate"}})],1)],1)]}}])})],1),a("b-col",{attrs:{md:"6",lg:"4"}},[a("validation-provider",{attrs:{name:"Importe comisión",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"amountComision"}},[t._v("Importe comisión")]),a("b-input-group",{attrs:{prepend:"$",append:"COP"},on:{input:function(e){return t.calculatorRateComission("commissionAmount")}}},[a("Cleave",{staticClass:"form-control",class:{"is-invalid":n.length>0},attrs:{id:"amountComision",raw:!0,options:t.numberFormat},model:{value:t.formCreate.commissionAmount,callback:function(e){t.$set(t.formCreate,"commissionAmount",e)},expression:"formCreate.commissionAmount"}})],1)],1)]}}])})],1),a("b-col",{attrs:{md:"6",lg:"2"}},[a("validation-provider",{attrs:{name:"Comison agente",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"rateNumber"}},[t._v("Comisión Agente")]),a("b-input-group",{attrs:{append:"%"},on:{input:function(e){return t.calculatorCommison()}}},[a("cleave",{staticClass:"form-control",class:{"is-invalid":n.length>0},attrs:{id:"rateNumber",raw:!0,options:t.number},model:{value:t.formCreate.commissionRateAgent,callback:function(e){t.$set(t.formCreate,"commissionRateAgent",e)},expression:"formCreate.commissionRateAgent"}})],1)],1)]}}])})],1)],1)],1)],1),a("div",{staticClass:"form_payment-transaction"},[a("h4",{staticClass:"title__form"},[t._v("Forma de pago Transacción")]),a("b-col",{attrs:{md:"12",lg:"12"}},[a("div",{staticClass:"form__agent"},[a("validation-observer",{ref:"paymentTransaction"},[a("div",{staticClass:"form__agent-data"},[t.optionsPayment?a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"metodo pago",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"payment"}},[t._v("Selecciona Metodo pago")]),a("v-select",{attrs:{dir:t.$store.state.appConfig.isRTL?"rtl":"ltr",label:"name",options:t.optionsPayment,reduce:function(t){return t.id}},model:{value:t.formPaymentTransaction.methodPayments,callback:function(e){t.$set(t.formPaymentTransaction,"methodPayments",e)},expression:"formPaymentTransaction.methodPayments"}})],1)]}}],null,!1,1177748946)})],1):t._e(),t.optionsTypePayments?a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"forma pago",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"payment"}},[t._v("Selecciona Forma Pago")]),a("v-select",{attrs:{dir:t.$store.state.appConfig.isRTL?"rtl":"ltr",label:"name",options:t.optionsTypePayments,reduce:function(t){return t.id}},model:{value:t.formPaymentTransaction.paymentType,callback:function(e){t.$set(t.formPaymentTransaction,"paymentType",e)},expression:"formPaymentTransaction.paymentType"}})],1)]}}],null,!1,195165122)})],1):t._e(),1==t.formPaymentTransaction.paymentType?a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"Lado de Transacción",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"transaccion"}},[t._v("Nombre banco")]),a("v-select",{attrs:{id:"transaccion",autocomplete:"off",label:"name",options:t.optionsBanks,reduce:function(t){return t.id}},model:{value:t.formPaymentTransaction.bankId,callback:function(e){t.$set(t.formPaymentTransaction,"bankId",e)},expression:"formPaymentTransaction.bankId"}})],1)]}}],null,!1,2971943620)})],1):t._e()],1)]),a("div",{staticClass:"form__agent-payment"},[1===t.validateMetodPayment()?a("div",[a("validation-observer",{ref:"paymentTransactionMethod1"},[a("b-row",[a("b-col",{attrs:{md:"12",lg:"6"}},[a("validation-provider",{attrs:{name:"Precio",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"price"}},[t._v("Precio")]),a("b-input-group",{attrs:{prepend:"$",append:"COP"}},[a("Cleave",{staticClass:"form-control",class:{"is-invalid":n.length>0},attrs:{id:"price",raw:!0,options:t.numberFormat},model:{value:t.formPaymentColounmValue.price,callback:function(e){t.$set(t.formPaymentColounmValue,"price",e)},expression:"formPaymentColounmValue.price"}})],1)],1)]}}],null,!1,3061139944)})],1),a("b-col",{attrs:{md:"12",lg:"6"}},[a("validation-provider",{attrs:{name:"Fecha Estimada",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"dateEstimation"}},[t._v("Fecha Estimada")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formPaymentColounmValue.estimatedDate,expression:"formPaymentColounmValue.estimatedDate"}],attrs:{id:"dateEstimation",type:"hidden"},domProps:{value:t.formPaymentColounmValue.estimatedDate},on:{input:function(e){e.target.composing||t.$set(t.formPaymentColounmValue,"estimatedDate",e.target.value)}}}),a("flat-pickr",{staticClass:"form-control",attrs:{name:"fecha",config:{enableTime:!1,time_24hr:!1,locale:t.locale,dateFormat:"Y-m-d",plugins:t.plugins}},model:{value:t.formPaymentColounmValue.estimatedDate,callback:function(e){t.$set(t.formPaymentColounmValue,"estimatedDate",e)},expression:"formPaymentColounmValue.estimatedDate"}})],1)]}}],null,!1,2329665929)})],1)],1)],1)],1):2===t.validateMetodPayment()?a("div",[a("validation-observer",{ref:"paymentTransactionMethod2"},[a("div",{staticClass:"form__payment"},[a("b-row",{attrs:{md:"12",lg:"12"}},[a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"Numero pagos",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"Npagos"}},[t._v("N. Pagos")]),a("b-form-input",{attrs:{id:"Npagos",type:"number",state:!(n.length>0)&&null},on:{change:function(e){return t.generateArrayDatesTransactions()}},model:{value:t.formPaymentColounmValue.numPayment,callback:function(e){t.$set(t.formPaymentColounmValue,"numPayment",e)},expression:"formPaymentColounmValue.numPayment"}})],1)]}}])})],1)],1),a("div",{staticClass:"list__items-payments"},t._l(this.formPaymentColounmValue.estimatedDate,(function(e,n){return a("b-col",{key:n,staticClass:"item_payment"},[a("b-col",{attrs:{md:"12",lg:"12"}},[a("validation-provider",{attrs:{name:e.name,rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.errors;return[a("b-form-group",{attrs:{state:!(r.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:e.name}},[t._v(t._s(e.name)+" pago")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"item.date"}],attrs:{id:e.name,type:"hidden"},domProps:{value:e.date},on:{input:function(a){a.target.composing||t.$set(e,"date",a.target.value)}}}),a("flat-pickr",{staticClass:"form-control",attrs:{name:e.name,config:{enableTime:!1,time_24hr:!1,locale:t.locale,dateFormat:"Y-m-d",plugins:t.plugins}},model:{value:e.date,callback:function(a){t.$set(e,"date",a)},expression:"item.date"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{md:"12",lg:"12"}},[a("validation-provider",{attrs:{name:"price"+n,rules:"required"},scopedSlots:t._u([{key:"default",fn:function(r){var s=r.errors;return[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"price"+n}},[t._v("Pago")]),a("b-input-group",{attrs:{prepend:"$",append:"COP"}},[a("Cleave",{staticClass:"form-control",class:{"is-invalid":s.length>0},attrs:{id:"price"+n,raw:!0,options:t.numberFormat},model:{value:e.price,callback:function(a){t.$set(e,"price",a)},expression:"item.price"}})],1)],1)]}}],null,!0)})],1)],1)})),1)],1)])],1):t._e()])],1)])],1),a("div",{staticClass:"form__detail-agent"},[a("h4",{staticClass:"title__form"},[t._v("Forma pago Agentes")]),a("ul",{staticClass:"detail-agent__list"},t._l(t.ArrayAgents,(function(e,n){return a("li",{key:n},[a("div",{staticClass:"agent-list__header"},[a("h5",[t._v("Agente: "+t._s(n+1))]),a("button",{staticClass:"list-header__icon",class:[n>0?"active":""],on:{click:function(e){return t.deleteAgent(n)}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"}},[a("path",{attrs:{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"}})])])]),t.isAdmin?a("div",{staticClass:"d-flex align-items-center flex-wrap mb-1"},[a("b-col",{attrs:{md:"12",lg:"3"}},[a("b-button",{staticClass:"mr-1 text-nowrap",attrs:{variant:"success"},on:{click:function(e){return t.openModalAgenteElite(n)}}},[t._v(" Seleccionar Agente ")])],1)],1):t._e(),a("FormAddAgent",{ref:"formAddgent",refInFor:!0,attrs:{index:n,isAdmin:t.isAdmin,agentSelected:t.agentSelected[n]},on:{update:function(e,a){return t.updateAgent(e,a,n)},changePayments:t.changePayments}})],1)})),0),a("b-button",{staticClass:"btn__add",attrs:{variant:"primary"},on:{click:function(e){return t.addAgent()}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"16",heigth:"16"}},[a("path",{attrs:{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"}})]),t._v(" Añadir Agente ")])],1)]),a("aside",{staticClass:"form__aside"},[a("p",[t._v("Resumen Transacción")]),a("ul",{staticClass:"form__aside-list"},[a("li",[a("span",[t._v("Empresa")]),a("span",[t._v(" "+t._s(t.currencyFormat(t.transactionAgentCompanyPorcentage.companyMoneyAmount))+" "),t.transactionAgentCompanyPorcentage.companyMoneyAmount?a("strong",{staticStyle:{color:"var(--primary)"}},[t._v(" ("+t._s(t.formCreate.commissionRateCompany)+"%) ")]):t._e()])]),a("li",[a("span",[t._v("Agente")]),a("span",[t._v(" "+t._s(t.currencyFormat(t.transactionAgentCompanyPorcentage.agentMoneyAmount))+" "),t.transactionAgentCompanyPorcentage.agentMoneyAmount?a("strong",{staticStyle:{color:"var(--primary)"}},[t._v(" ("+t._s(t.formCreate.commissionRateAgent)+"%) ")]):t._e()])]),a("li",{staticClass:"line"}),a("li",[a("span",[t._v("Total")]),a("strong",{staticStyle:{color:"var(--primary)"}},[t._v(" "+t._s(t.currencyFormat(t.transactionAgentCompanyPorcentage.totalAmount))+" ")])])])])]),a("transition",{attrs:{name:"fade"}},[t.modalSelectAgent?a("v-modal",{attrs:{titulo:"Seleccionar agente elite",size:"lg",footer:""},on:{close:function(e){t.modalSelectAgent=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.getInfoAgent()}}},[t._v(" Seleccionar ")])]},proxy:!0}],null,!1,2730573256)},[a("modalMembership",{ref:"tableAgents",tag:"component",attrs:{elegir:"",rango:!1}})],1):t._e()],1)],1)},i=[],l=a("c7eb"),c=a("1da1"),m=a("ade3"),u=(a("d81d"),a("b64b"),a("a9e3"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("159b"),a("2083")),d=a.n(u),f=a("c38f"),p=a.n(f),g=a("4a7a"),v=a.n(g),b=a("7bb1"),h=(a("a434"),a("4984")),y=a("749f"),C=a.n(y),_=a("223c"),A=a("4c93"),P={data:function(){return Object.keys(A).forEach((function(t){Object(b["c"])(t,A[t])})),{locale:h["Spanish"],plugins:[new C.a({confirmText:"Agregar",showAlways:!0,theme:"dark"})],formCreate:{price:null,saleDate:null,transactionSide:null,commissionRate:null,commissionAmount:null,commissionRateAgent:null,commissionRateCompany:null},transactionAgentCompanyPorcentage:{agentMoneyAmount:null,companyMoneyAmount:null,totalAmount:null},formAgent:{userId:null,agentPayments:null,price:null,estimatedDate:null,numPayment:null},formPaymentTransaction:{methodPayments:null,paymentType:null,bankId:null},formPaymentColounmValue:{price:null,numPayment:null,estimatedDate:null},ArrayAgents:[{agentPaymentsColounmValue:{}}],numberFormat:{numeralPositiveOnly:!0,numeral:!0,numeralDecimalMark:",",delimiter:"."},number:{numeral:!0,numeralThousandsGroupStyle:"thousand"}}},methods:{changeMethodPayments:function(){for(var t in this.formAgent)switch(t){case"estimatedDate":this.formAgent[t]=null;break;case"numPayment":this.formAgent[t]=null;break;case"arrayDates":this.formAgent[t]=null;break;case"price":this.formAgent[t]=null;break}},generateArrayDates:function(){this.formAgent.estimatedDate=[];for(var t=1;t<=this.formAgent.numPayment;t++)this.formAgent.estimatedDate.push({date:null,name:"Fecha ".concat(t),price:null})},generateArrayDatesTransactions:function(){this.formPaymentColounmValue.estimatedDate=[];for(var t=1;t<=this.formPaymentColounmValue.numPayment;t++)this.formPaymentColounmValue.estimatedDate.push({date:null,name:"Fecha ".concat(t),price:null})},deleteAgent:function(t){this.ArrayAgents.length>1&&this.ArrayAgents.splice(t,1)},addAgent:function(){this.ArrayAgents.push({agentPaymentsColounmValue:{}}),this.agentSelected.push("")},updateTransaction:function(t,e){if(null!=t)switch(e){case"methodPayments":this.formPaymentTransaction[e]=t;break;default:this.formPaymentTransaction.PaymentsColounmValue[e]=t;break}},updateAgent:function(t,e,a){if(null!=t)switch(e){case"userId":this.ArrayAgents[a][e]=t;break;case"agentUnity":this.ArrayAgents[a][e]=t;break;case"agentPayments":this.ArrayAgents[a][e]=t;break;default:this.ArrayAgents[a].agentPaymentsColounmValue[e]=t;break}},showAlert:function(t){var e=t.title,a=t.text,n=t.variant;this.$toast({component:_["a"],props:{title:e,icon:"AlertCircleIcon",text:a,variant:n}})},pageStart:function(){this.$router.push({name:"transactions-agente"})},backPage:function(){var t=JSON.parse(localStorage.getItem("keyTransaction"));this.$router.push({name:"transactions-agente-form",params:{idTransaction:t.idTransaction}})},sendFormTransactions:function(){var t=this;return Object(c["a"])(Object(l["a"])().mark((function e(){var a,n,r,s,o,i,c,u;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={},n={},e.t0=Object(l["a"])().keys(t.dataTransactions);case 3:if((e.t1=e.t0()).done){e.next=18;break}r=e.t1.value,e.t2=r,e.next="idUser"===e.t2?8:"inmuebleId"===e.t2?10:"tContractId"===e.t2?12:"Ttype"===e.t2?14:16;break;case 8:return n[r]=t.dataTransactions[r],e.abrupt("break",16);case 10:return n[r]=t.dataTransactions[r],e.abrupt("break",16);case 12:return n[r]=t.dataTransactions[r].id,e.abrupt("break",16);case 14:return n[r]=t.dataTransactions[r].id,e.abrupt("break",16);case 16:e.next=3;break;case 18:for(o in Object.assign(a,{transaction:n}),Object.assign(a,{transactionAgentCompanyPorcentage:t.transactionAgentCompanyPorcentage}),Object.assign(a,{transactionForm:t.formCreate}),s={},t.formPaymentColounmValue)null!=t.formPaymentColounmValue[o]&&Object.assign(s,Object(m["a"])({},o,t.formPaymentColounmValue[o]));for(c in i={},t.formPaymentTransaction)null!=t.formPaymentTransaction[c]&&Object.assign(i,Object(m["a"])({},c,t.formPaymentTransaction[c]));return Object.assign(i,{agentPaymentsColounmValue:s}),Object.assign(a,{transactionPaymentForm:i}),Object.assign(a,{transactionFormAgent:t.ArrayAgents}),e.next=30,t.$store.dispatch("appTransactions/sendFormTransactions",a);case 30:u=e.sent,u?(t.showAlert({title:"Enviado",text:"Se ha enviado correctamente la transacción.",variant:"success"}),t.pageStart()):t.showAlert({title:"Algo salio mal",text:"No se pudo enviar la transacción.",variant:"danger"});case 32:case"end":return e.stop()}}),e)})))()},calculatorRateComission:function(t){if(this.formCreate.price>0){var e=0;switch(t){case"rateComssion":e=this.formCreate.commissionRate*this.formCreate.price/100,this.formCreate.commissionAmount=e,this.calculatorCommison();break;case"commissionAmount":e=100*this.formCreate.commissionAmount/this.formCreate.price,this.formCreate.commissionRate=e,this.calculatorCommison()}}},calculatorCommison:function(){var t=this;null!=this.formCreate.commissionAmount&&setTimeout((function(){var e=t.formCreate.commissionRateAgent*t.formCreate.commissionAmount/100;t.transactionAgentCompanyPorcentage.agentMoneyAmount=e,t.transactionAgentCompanyPorcentage.companyMoneyAmount=t.formCreate.commissionAmount-e,t.formCreate.commissionRateCompany=100-t.formCreate.commissionRateAgent,t.transactionAgentCompanyPorcentage.totalAmount=t.formCreate.commissionAmount}),500)},currencyFormat:function(t){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(t)}}},k=a("138a"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form__agent"},[a("validation-observer",{ref:"formAgent"},[a("div",{staticClass:"form__agent-data"},[t.isAdmin?a("b-col",{attrs:{md:"12",lg:"4"}},[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"barrio"}},[t._v("ID Agente")]),a("b-form-input",{attrs:{id:"barrio",placeholder:"id...",value:t.formAgent.userId,readonly:t.isAdmin}})],1)],1):a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"Selecciona un agente",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"selectAgents"}},[t._v("Seleccionar agentes")]),a("v-select",{attrs:{autocomplete:"on",dir:t.$store.state.appConfig.isRTL?"rtl":"ltr",label:"name",options:t.allAgents,reduce:function(t){return t.id}},model:{value:t.formAgent.userId,callback:function(e){t.$set(t.formAgent,"userId",e)},expression:"formAgent.userId"}})],1)]}}])})],1),t.optionsPayment?a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"Lado de Transacción",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"payment"}},[t._v("Selecciona Metodo pago")]),a("v-select",{attrs:{dir:t.$store.state.appConfig.isRTL?"rtl":"ltr",label:"name",options:t.optionsPayment,reduce:function(t){return t.id}},model:{value:t.formAgent.agentPayments,callback:function(e){t.$set(t.formAgent,"agentPayments",e)},expression:"formAgent.agentPayments"}})],1)]}}],null,!1,1194666547)})],1):t._e()],1)]),a("div",{staticClass:"form__agent-payment"},[1===t.validateMetodPayment()?a("div",[a("validation-observer",{ref:"paymentMethod1"},[a("b-row",[a("b-col",{attrs:{md:"12",lg:"6"}},[a("validation-provider",{attrs:{name:"Precio",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"price"}},[t._v("Precio")]),a("b-input-group",{attrs:{prepend:"$",append:"COP"}},[a("Cleave",{staticClass:"form-control",class:{"is-invalid":n.length>0},attrs:{id:"price",raw:!0,options:t.numberFormat},model:{value:t.formAgent.price,callback:function(e){t.$set(t.formAgent,"price",e)},expression:"formAgent.price"}})],1)],1)]}}],null,!1,4095482937)})],1),a("b-col",{attrs:{md:"12",lg:"6"}},[a("validation-provider",{attrs:{name:"Fecha Estimada",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"dateEstimation"}},[t._v("Fecha Estimada")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formAgent.estimatedDate,expression:"formAgent.estimatedDate"}],attrs:{id:"dateEstimation",type:"hidden"},domProps:{value:t.formAgent.estimatedDate},on:{input:function(e){e.target.composing||t.$set(t.formAgent,"estimatedDate",e.target.value)}}}),a("flat-pickr",{staticClass:"form-control",attrs:{name:"fecha",config:{enableTime:!1,time_24hr:!1,locale:t.locale,dateFormat:"Y-m-d",plugins:t.plugins}},model:{value:t.formAgent.estimatedDate,callback:function(e){t.$set(t.formAgent,"estimatedDate",e)},expression:"formAgent.estimatedDate"}})],1)]}}],null,!1,3128121208)})],1)],1)],1)],1):2===t.validateMetodPayment()?a("div",[a("validation-observer",{ref:"paymentMethod2"},[a("div",{staticClass:"form__payment"},[a("b-row",{attrs:{md:"12",lg:"12"}},[a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"Numero pagos",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"Npagos"}},[t._v("N. Pagos")]),a("b-form-input",{attrs:{id:"Npagos",type:"number",state:!(n.length>0)&&null},on:{change:function(e){return t.generateArrayDates()}},model:{value:t.formAgent.numPayment,callback:function(e){t.$set(t.formAgent,"numPayment",e)},expression:"formAgent.numPayment"}})],1)]}}])})],1)],1),a("div",{staticClass:"list__items-payments"},t._l(this.formAgent.estimatedDate,(function(e,n){return a("b-col",{key:n,staticClass:"item_payment"},[a("b-col",{attrs:{md:"12",lg:"12"}},[a("validation-provider",{attrs:{name:e.name,rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.errors;return[a("b-form-group",{attrs:{state:!(r.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:e.name}},[t._v(t._s(e.name)+" pago")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"item.date"}],attrs:{id:e.name,type:"hidden"},domProps:{value:e.date},on:{input:function(a){a.target.composing||t.$set(e,"date",a.target.value)}}}),a("flat-pickr",{staticClass:"form-control",attrs:{name:e.name,config:{enableTime:!1,time_24hr:!1,locale:t.locale,dateFormat:"Y-m-d",plugins:t.plugins}},model:{value:e.date,callback:function(a){t.$set(e,"date",a)},expression:"item.date"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{md:"12",lg:"12"}},[a("validation-provider",{attrs:{name:"price"+n,rules:"required"},scopedSlots:t._u([{key:"default",fn:function(r){var s=r.errors;return[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"price"+n}},[t._v("Pago")]),a("b-input-group",{attrs:{prepend:"$",append:"COP"}},[a("Cleave",{staticClass:"form-control",class:{"is-invalid":s.length>0},attrs:{id:"price"+n,raw:!0,options:t.numberFormat},model:{value:e.price,callback:function(a){t.$set(e,"price",a)},expression:"item.price"}})],1)],1)]}}],null,!0)})],1)],1)})),1)],1)])],1):t._e()])],1)},T=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.TableAllAgents?a("div",{attrs:{id:"TableAllAgents"}},[a("div",{staticClass:"mb-2",attrs:{"cols-lg":"5","cols-sm":"auto"}},[a("app-collapse",[a("app-collapse-item",{attrs:{title:"FILTRO GENERAL",isVisible:!0}},[a("div",{staticClass:"d-flex flex-wrap"},[a("b-col",{attrs:{cols:"12",md:"3"}},[a("b-form-group",{attrs:{label:"ID Agente"}},[a("b-form-input",{attrs:{value:t.query.idAgent,placeholder:"Buscar id...",type:"search",trim:""},on:{change:function(e){return t.setQuery("idAgent",e)}}})],1)],1),a("b-col",{attrs:{cols:"12",md:"3"}},[a("b-form-group",{attrs:{label:"Nombre Agente"}},[a("b-form-input",{attrs:{value:t.query.nameAgent,placeholder:"Buscar nombre...",type:"search",trim:""},on:{change:function(e){return t.setQuery("nameAgent",e)}}})],1)],1),a("b-col",{attrs:{cols:"12",md:"3"}},[a("b-form-group",{attrs:{label:"Correo Agente"}},[a("b-form-input",{attrs:{value:t.query.emailAgent,placeholder:"Buscar correo...",type:"email",trim:""},on:{change:function(e){return t.setQuery("emailAgent",e)}}})],1)],1),t.optionsPlans?a("b-col",{attrs:{cols:"12",md:"3"}},[a("b-form-group",{attrs:{label:"Plan"}},[a("v-select",{attrs:{options:t.optionsPlans,reduce:function(t){return t.value.id},label:"text"},model:{value:t.query.plans,callback:function(e){t.$set(t.query,"plans",e)},expression:"query.plans"}})],1)],1):t._e()],1)])],1)],1),a("b-row",[a("b-col",{staticClass:"mx-auto my-1",attrs:{cols:"auto"}},[t._v(" Clientes: "),a("b",{staticClass:"text-primary"},[t._v(t._s(t.TableAllAgents.to))]),t._v(" de "),a("b",[t._v(t._s(t.TableAllAgents.total))])]),a("b-col",{attrs:{cols:"12"}},[t.agentsAllSelected.length>0?a("h5",[t._v("Has seleccionado: "+t._s(t.agentsAllSelected.length))]):t._e(),a("b-table",{ref:"selectableTable",attrs:{hover:"",small:"",bordered:"","head-variant":"primary","thead-class":"primaryColor","selected-variant":"primary",responsive:"",items:t.ListAllAgents,fields:t.fields,"select-mode":"single",selectable:""},on:{"row-selected":t.onRowSelected},scopedSlots:t._u([{key:"head(id)",fn:function(e){return[a("div",{staticClass:"header"},[a("span",[t._v(t._s(e.label))]),a("div",{staticClass:"header__btns"},[a("button",[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"10",heigth:"10"}},[a("path",{attrs:{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"}})])]),a("button",[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"10",heigth:"10"}},[a("path",{attrs:{d:"M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"}})])])])])]}},{key:"head(created_at)",fn:function(e){return[a("div",{staticClass:"header"},[a("span",[t._v(t._s(e.label))])])]}},{key:"head(userdata.foto_persona)",fn:function(e){return[a("div",{staticClass:"header"},[a("span",[t._v(t._s(e.label))])])]}},{key:"head(userdata.primer_nombre)",fn:function(e){return[a("div",{staticClass:"header"},[a("span",[t._v(t._s(e.label))])])]}},{key:"head(email)",fn:function(e){return[a("div",{staticClass:"header"},[a("span",[t._v(t._s(e.label))])])]}},{key:"head(empresa.nombre)",fn:function(e){return[a("div",{staticClass:"header"},[a("span",[t._v(t._s(e.label))])])]}},{key:"head(code)",fn:function(e){return[a("div",{staticClass:"header"},[a("span",[t._v(t._s(e.label))])])]}},{key:"head(action)",fn:function(e){return[a("div",{staticClass:"header"},[a("span",[t._v(t._s(e.label))])])]}},{key:"cell(userdata.foto_persona)",fn:function(t){return[a("b-avatar",{attrs:{src:t.value}})]}},{key:"cell(created_at)",fn:function(e){return[a("span",{staticStyle:{"font-size":"0.9em"}},[t._v(t._s(t._f("fechaFormating")(e.item.created_at))+" ("+t._s(t.dateCounter(e.item.created_at))+") ")])]}},{key:"cell(code)",fn:function(e){return[a("span",{staticClass:"badge badge-primary"},[t._v(" "+t._s(e.item.code)+" ")])]}}],null,!1,3188291534)})],1)],1),a("div",{staticClass:"d-flex flex-wrap align-items-center mt-1"},[a("div",{staticClass:"d-flex"},[t.TableAllAgents.per_page<t.TableAllAgents.total?a("b-pagination",{attrs:{value:t.currentPage,"per-page":t.TableAllAgents.per_page,"total-rows":t.TableAllAgents.total,"first-number":"","last-number":"","prev-class":"prev-arrow","next-class":"next-arrow"},on:{change:t.getAgents},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})]},proxy:!0}],null,!1,1308952388)}):t._e()],1)])],1):t._e()},$=[],F=a("7088"),S=a("69c4"),O=a("c4e2"),D=a("adbc"),q=a("c1df"),M=a.n(q),V=(a("898b"),{name:"membership",mixins:[F["a"]],components:{vSelect:v.a,modalVerificationAgent:S["a"],flatPickr:p.a,AppCollapse:O["a"],AppCollapseItem:D["a"],VModal:k["a"]},data:function(){return{selectAgent:{},fields:[{key:"id",label:"Id"},{key:"created_at",label:"Fecha creación"},{key:"userdata.foto_persona",label:"imagen"},{key:"userdata.primer_nombre",label:"Nombre"},{key:"email",label:"correo"},{key:"empresa.nombre",label:"Nombre empresa"},{key:"code",label:"Membresia"}],search:0,selected:null,locale:h["Spanish"],plugins:[new C.a({confirmText:"Agregar",showAlways:!0,theme:"dark"})],query:{titulo_inmueble:null}}},filters:{fechaFormating:function(t){if(t){var e=M()(t).format("L");return e}}},updated:function(){this.validateCheck()},methods:{closeModal:function(){this.stateModal=!1},onRowSelected:function(t){this.selectAgent=t[0]},getInfoAgent:function(){return this.selectAgent},dateCounter:function(t){var e=new Date(t).getTime(),a=M()(e);return M()(a,"YYYYMMDD").fromNow()}}}),j=V,N=(a("d7d6"),a("545c"),a("2877")),I=Object(N["a"])(j,x,$,!1,null,"e3e7b91e",null),R=I.exports,E=(r={mixins:[P],components:{vSelect:v.a,Cleave:d.a,flatPickr:p.a,ValidationProvider:b["b"],ValidationObserver:b["a"],modalMembership:R,VModal:k["a"]},data:function(){return{modalSelectAgent:!1}},computed:{helpers:function(){return this.$store.state.appConfiguracion.options},allAgents:function(){return this.helpers.agentes.map((function(t){return{name:t.primer_nombre,id:t.id}}))},isStateFormDetail:function(){return this.$store.state.appTransactions.isValidateFormDetail},optionsPayment:function(){return this.$store.state.appTransactions.optionsPayment}},watch:(n={},Object(m["a"])(n,"formAgent.agentPayments",(function(){this.changeMethodPayments(),this.$emit("changePayments",this.index)})),Object(m["a"])(n,"agentSelected",(function(){this.formAgent.userId=this.agentSelected})),n),props:{index:{type:Number},isAdmin:{type:Boolean},agentSelected:{type:String,default:null}}},Object(m["a"])(r,"components",{vSelect:v.a,ValidationProvider:b["b"],ValidationObserver:b["a"],flatPickr:p.a,Cleave:d.a}),Object(m["a"])(r,"mounted",(function(){this.watchForm(),this.$parent.$on("validateFormAgent",this.validationFormAgent)})),Object(m["a"])(r,"methods",{getInfoAgent:function(){var t=this.$refs["tableAgents"].getInfoAgent();this.agenElitetSelected=t,this.modalAgentElite=!1},openModalAgenteElite:function(){this.modalSelectAgent=!0},watchForm:function(){var t=this,e=function(e){t.$watch((function(){return t.formAgent[e]}),(function(){t.$emit("update",t.formAgent[e],e)}))};for(var a in this.formAgent)e(a)},validateMetodPayment:function(){if(this.formAgent.agentPayments)return 1===this.formAgent.agentPayments?1:2},validateFullFields:function(){var t=this;return Object(c["a"])(Object(l["a"])().mark((function e(){var a,n,r;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=null,r=!1,a=new Promise((function(e,a){t.$refs.formAgent.validate().then((function(t){t?e(!0):a(!1)}))})),null==t.formAgent.agentPayments){e.next=7;break}return n=1==t.formAgent.agentPayments?new Promise((function(e,a){t.$refs.paymentMethod1.validate().then((function(t){t?e(!0):a(!1)}))})):new Promise((function(e,a){t.$refs.paymentMethod2.validate().then((function(t){t?e(!0):a(!1)}))})),e.next=7,Promise.all([a,n]).then((function(){r=!0})).catch((function(){r=!1}));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))()}}),r),L=E,z=(a("97c3"),Object(N["a"])(L,w,T,!1,null,"797a0910",null)),B=z.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form__agent"},[a("validation-observer",{ref:"formAgent"},[a("div",{staticClass:"form__agent-data"},[t.optionsPayment?a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"Lado de Transacción",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"payment"}},[t._v("Selecciona Metodo pago")]),a("v-select",{attrs:{dir:t.$store.state.appConfig.isRTL?"rtl":"ltr",label:"name",options:t.optionsPayment,reduce:function(t){return t.id}},model:{value:t.formPaymentTransaction.methodPayments,callback:function(e){t.$set(t.formPaymentTransaction,"methodPayments",e)},expression:"formPaymentTransaction.methodPayments"}})],1)]}}],null,!1,1177748946)})],1):t._e()],1)]),a("div",{staticClass:"form__agent-payment"},[1===t.validateMetodPayment()?a("div",[a("validation-observer",{ref:"paymentMethod1"},[a("b-row",[a("b-col",{attrs:{md:"12",lg:"6"}},[a("validation-provider",{attrs:{name:"Precio",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"price"}},[t._v("Precio")]),a("b-input-group",{attrs:{prepend:"$",append:"COP"}},[a("Cleave",{staticClass:"form-control",class:{"is-invalid":n.length>0},attrs:{id:"price",raw:!0,options:t.numberFormat},model:{value:t.formPaymentTransaction.price,callback:function(e){t.$set(t.formPaymentTransaction,"price",e)},expression:"formPaymentTransaction.price"}})],1)],1)]}}],null,!1,2874797502)})],1),a("b-col",{attrs:{md:"12",lg:"6"}},[a("validation-provider",{attrs:{name:"Fecha Estimada",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",{attrs:{state:!(n.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:"dateEstimation"}},[t._v("Fecha Estimada")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formPaymentTransaction.estimatedDate,expression:"formPaymentTransaction.estimatedDate"}],attrs:{id:"dateEstimation",type:"hidden"},domProps:{value:t.formPaymentTransaction.estimatedDate},on:{input:function(e){e.target.composing||t.$set(t.formPaymentTransaction,"estimatedDate",e.target.value)}}}),a("flat-pickr",{staticClass:"form-control",attrs:{name:"fecha",config:{enableTime:!1,time_24hr:!1,locale:t.locale,dateFormat:"Y-m-d",plugins:t.plugins}},model:{value:t.formPaymentTransaction.estimatedDate,callback:function(e){t.$set(t.formPaymentTransaction,"estimatedDate",e)},expression:"formPaymentTransaction.estimatedDate"}})],1)]}}],null,!1,656791967)})],1)],1)],1)],1):2===t.validateMetodPayment()?a("div",[a("validation-observer",{ref:"paymentMethod2"},[a("div",{staticClass:"form__payment"},[a("b-row",{attrs:{md:"12",lg:"12"}},[a("b-col",{attrs:{md:"12",lg:"4"}},[a("validation-provider",{attrs:{name:"Numero pagos",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"Npagos"}},[t._v("N. Pagos")]),a("b-form-input",{attrs:{id:"Npagos",type:"number",state:!(n.length>0)&&null},on:{change:function(e){return t.generateArrayDatesTransactions()}},model:{value:t.formPaymentTransaction.numPayment,callback:function(e){t.$set(t.formPaymentTransaction,"numPayment",e)},expression:"formPaymentTransaction.numPayment"}})],1)]}}])})],1)],1),a("div",{staticClass:"list__items-payments"},t._l(this.formPaymentTransaction.estimatedDate,(function(e,n){return a("b-col",{key:n,staticClass:"item_payment"},[a("b-col",{attrs:{md:"12",lg:"12"}},[a("validation-provider",{attrs:{name:e.name,rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.errors;return[a("b-form-group",{attrs:{state:!(r.length>0)&&null}},[a("label",{staticClass:"required",attrs:{for:e.name}},[t._v(t._s(e.name)+" pago")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"item.date"}],attrs:{id:e.name,type:"hidden"},domProps:{value:e.date},on:{input:function(a){a.target.composing||t.$set(e,"date",a.target.value)}}}),a("flat-pickr",{staticClass:"form-control",attrs:{name:e.name,config:{enableTime:!1,time_24hr:!1,locale:t.locale,dateFormat:"Y-m-d",plugins:t.plugins}},model:{value:e.date,callback:function(a){t.$set(e,"date",a)},expression:"item.date"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{md:"12",lg:"12"}},[a("validation-provider",{attrs:{name:"price"+n,rules:"required"},scopedSlots:t._u([{key:"default",fn:function(r){var s=r.errors;return[a("b-form-group",[a("label",{staticClass:"required",attrs:{for:"price"+n}},[t._v("Pago")]),a("b-input-group",{attrs:{prepend:"$",append:"COP"}},[a("Cleave",{staticClass:"form-control",class:{"is-invalid":s.length>0},attrs:{id:"price"+n,raw:!0,options:t.numberFormat},model:{value:e.price,callback:function(a){t.$set(e,"price",a)},expression:"item.price"}})],1)],1)]}}],null,!0)})],1)],1)})),1)],1)])],1):t._e()])],1)},Y=[],J=(s={mixins:[P],components:{vSelect:v.a,Cleave:d.a,flatPickr:p.a,ValidationProvider:b["b"],ValidationObserver:b["a"]},data:function(){return{}},computed:{helpers:function(){return this.$store.state.appConfiguracion.options},allAgents:function(){return this.helpers.agentes.map((function(t){return{name:t.primer_nombre,id:t.id}}))},isStateFormDetail:function(){return this.$store.state.appTransactions.isValidateFormDetail},optionsPayment:function(){return this.$store.state.appTransactions.optionsPayment}},watch:{},props:{index:{type:Number}}},Object(m["a"])(s,"components",{vSelect:v.a,ValidationProvider:b["b"],ValidationObserver:b["a"],flatPickr:p.a,Cleave:d.a}),Object(m["a"])(s,"mounted",(function(){this.watchForm(),this.$parent.$on("validateFormAgent",this.validationFormAgent)})),Object(m["a"])(s,"methods",{watchForm:function(){var t=this,e=function(e){t.$watch((function(){return t.formPaymentTransaction[e]}),(function(){t.$emit("updateTransaction",t.formPaymentTransaction[e],e)}))};for(var a in this.formPaymentTransaction)e(a)},validateMetodPayment:function(){if(this.formPaymentTransaction.methodPayments)return 1===this.formPaymentTransaction.methodPayments?1:2},validPaymentAgent:function(){var t=this;return Object(c["a"])(Object(l["a"])().mark((function e(){var a;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.formAgent.agentPayments){e.next=12;break}if(1!==t.formAgent.agentPayments){e.next=8;break}return e.next=4,t.$refs.paymentMethod1.validate().then((function(t){return!!t}));case 4:return a=e.sent,e.abrupt("return",a);case 8:return a=t.$refs.paymentMethod2.validate().then((function(t){return!!t})),e.abrupt("return",a);case 10:e.next=14;break;case 12:return a=!1,e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))()},validationFormAgent:function(){var t=this;return Object(c["a"])(Object(l["a"])().mark((function e(){var a;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.formAgent.validate().then((function(t){return!!t}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},validateFullFields:function(){var t=this;return Object(c["a"])(Object(l["a"])().mark((function e(){var a,n;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.validationFormAgent();case 2:return a=e.sent,e.next=5,t.validPaymentAgent();case 5:return n=e.sent,e.abrupt("return",a&&n);case 7:case"end":return e.stop()}}),e)})))()}}),s),Q=J,G=(a("206d"),Object(N["a"])(Q,H,Y,!1,null,"5208b49d",null)),U=G.exports,K={mixins:[P],data:function(){return{indexAgent:0,agentSelected:[""],modalSelectAgent:!1,isAdmin:!1,isFormDetail:!1,isFormAgents:!1,isFormPaymentTransaction:!1,dataTransactions:null}},components:{vSelect:v.a,Cleave:d.a,flatPickr:p.a,ValidationProvider:b["b"],ValidationObserver:b["a"],FormAddAgent:B,paymentTransaction:U,VModal:k["a"],modalMembership:R},computed:{helpers:function(){return this.$store.state.appConfiguracion.options},allAgents:function(){return this.helpers.agentes.map((function(t){return{name:t.primer_nombre,id:t.id}}))},optionsTransactions:function(){return this.$store.state.appTransactions.optionsTransactions},optionsPayment:function(){return this.$store.state.appTransactions.optionsPayment},optionsBanks:function(){return this.$store.state.appTransactions.optionsBanks},optionsTypePayments:function(){return this.$store.state.appTransactions.optionsTypePayments}},created:function(){this.dataTransactions=JSON.parse(localStorage.getItem("ordenTransaction")),this.isAdmin=this.$can("transaction_select_elite","transaction"),this.$store.dispatch("appTransactions/getoOptionsTransactions"),this.$store.dispatch("appTransactions/getOptionsPayment"),this.$store.dispatch("appTransactions/getOptionsBanks"),this.$store.dispatch("appTransactions/getOptionsTypePayments")},watch:Object(m["a"])({},"formCreate.commissionRate",(function(){Number(this.formCreate.commissionRate)>=100&&(this.formCreate.commissionRate=100)})),methods:{getInfoAgent:function(){var t=this.$refs["tableAgents"].getInfoAgent();this.agentSelected[this.indexAgent]=t.id.toString(),this.modalSelectAgent=!1},openModalAgenteElite:function(t){this.indexAgent=t,this.modalSelectAgent=!0},validateMetodPayment:function(){if(this.formPaymentTransaction.methodPayments)return 1===this.formPaymentTransaction.methodPayments?1:2},changePayments:function(t){this.ArrayAgents[t].agentPaymentsColounmValue={}},checkFieldsForm:function(){var t=this;return Object(c["a"])(Object(l["a"])().mark((function e(){return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.checkFieldsAgent();case 2:return e.next=4,t.checkFieldsDetails();case 4:return e.next=6,t.checkFieldsPaymentTransaction();case 6:setTimeout((function(){t.validateForm()}),1e3);case 7:case"end":return e.stop()}}),e)})))()},checkFieldsPaymentTransaction:function(){var t=this;return Object(c["a"])(Object(l["a"])().mark((function e(){var a,n;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=null,a=new Promise((function(e,a){t.$refs.paymentTransaction.validate().then((function(t){t?e(!0):a(!1)}))})),null!=t.formPaymentTransaction.methodPayments&&(n=1==t.validateMetodPayment()?new Promise((function(e,a){t.$refs.paymentTransactionMethod1.validate().then((function(t){t?e(!0):a(!1)}))})):new Promise((function(e,a){t.$refs.paymentTransactionMethod2.validate().then((function(t){t?e(!0):a(!1)}))})),Promise.all([a,n]).then((function(e){t.isFormPaymentTransaction=!0})).catch((function(e){t.isFormPaymentTransaction=!1})));case 3:case"end":return e.stop()}}),e)})))()},checkFieldsDetails:function(){var t=this;return Object(c["a"])(Object(l["a"])().mark((function e(){return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.formDetailsPayment.validate().then((function(e){t.isFormDetail=!!e}));case 2:case"end":return e.stop()}}),e)})))()},checkFieldsAgent:function(){var t=this;return Object(c["a"])(Object(l["a"])().mark((function e(){return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isFormAgents=!0,e.next=3,t.$refs["formAddgent"].forEach(function(){var e=Object(c["a"])(Object(l["a"])().mark((function e(a){var n;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.validateFullFields();case 2:n=e.sent,n||(t.isFormAgents=!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))()},validateForm:function(){this.isFormDetail&&this.isFormAgents&&this.isFormPaymentTransaction?this.sendFormTransactions():this.showAlert({title:"Algo salio mal",text:"Faltan Campos por llenar, valida nuevamente.",variant:"danger"})}}},W=K,X=(a("85f7"),Object(N["a"])(W,o,i,!1,null,"879d3050",null));e["default"]=X.exports},"4a6a":function(t,e,a){},"545c":function(t,e,a){"use strict";a("4a6a")},"79dc":function(t,e,a){},"85f7":function(t,e,a){"use strict";a("c319")},"92d6":function(t,e,a){},"97c3":function(t,e,a){"use strict";a("ace6")},ace6:function(t,e,a){},c319:function(t,e,a){},d7d6:function(t,e,a){"use strict";a("92d6")}}]);
//# sourceMappingURL=chunk-959b902a.9195210b.js.map