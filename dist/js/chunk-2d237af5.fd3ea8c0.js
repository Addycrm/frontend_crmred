(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d237af5"],{fbbe:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"permission"}},[o("b-container",[o("b-overlay",{attrs:{show:t.overlay}},t._l(t.goodTable,(function(e,a){return o("b-card",{key:a,scopedSlots:t._u([{key:"header",fn:function(){return[o("h2",{staticClass:"mb-0 mr-2"},[t._v(" "+t._s(e.titulo)+" ")]),e.btn?o("div",{staticClass:"d-flex align-items-center ml-auto"},[o("b-button",{staticClass:"text-nowrap d-flex align-items-center",attrs:{size:"md",variant:e.btn.variant},on:{click:function(o){return t.openModal(e.btn.modal)}}},[o("span",{staticClass:"align-middle"},[t._v(t._s(e.btn.texto))])])],1):t._e()]},proxy:!0}],null,!0)},[o("VueGoodTable",t._b({attrs:{styleClass:"vgt-table striped","search-options":{enabled:!0,placeholder:"Buscar..."}},scopedSlots:t._u([{key:"table-row",fn:function(a){return["nombre"===a.column.field?o("span",[o("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"title-tab",attrs:{title:a.formattedRow[a.column.field]}},[t._v(" "+t._s(a.formattedRow[a.column.field])+" ")])]):"descripcion"===a.column.field?o("span",{staticClass:"d-flex flex-wrap"},[o("div",{domProps:{innerHTML:t._s(a.formattedRow[a.column.field])}})]):"actions"===a.column.field?o("span",{staticClass:"d-flex flex-wrap"},t._l(a.formattedRow[a.column.field],(function(e){return o("b-badge",{key:e.id,style:{margin:"5px"},attrs:{variant:"light-primary"}},[t._v(" "+t._s(e.title)+" ")])})),1):"settings"===a.column.field?o("span",{staticClass:"d-flex"},[t._l(e.config.btn,(function(e,i){return[o("b-button",{key:i,style:{margin:"5px"},attrs:{size:"sm",variant:e.variant},on:{click:function(o){return t.openModal(e.modal,a.row)}}},[t._v(" "+t._s(e.texto)+" ")])]}))],2):o("span",[t._v(" "+t._s(a.formattedRow[a.column.field])+" ")])]}},{key:"pagination-bottom",fn:function(a){return[o("div",{staticClass:"d-flex flex-wrap align-items-center mt-1"},[o("div",{staticClass:"d-flex align-items-center"},[o("span",{staticClass:"text-nowrap"},[t._v(" Mostrando 1 a ")]),o("b-form-select",{staticClass:"mx-1",attrs:{options:["10","20","100"]},on:{input:function(t){return a.perPageChanged({currentPerPage:t})}},model:{value:e.tabla.paginationOptions.perPage,callback:function(o){t.$set(e.tabla.paginationOptions,"perPage",o)},expression:"item.tabla.paginationOptions.perPage"}}),o("span",{staticClass:"text-nowrap"},[t._v(" de "+t._s(a.total)+" registros ")])],1),a.total>e.tabla.paginationOptions.perPage?o("div",{staticClass:"d-flex ml-auto"},[o("b-pagination",{staticClass:"mb-0",attrs:{value:1,"total-rows":a.total,"per-page":e.tabla.paginationOptions.perPage,"first-number":"","last-number":"",align:"right","prev-class":"prev-item","next-class":"next-item"},on:{input:function(t){return a.pageChanged({currentPage:t})}},scopedSlots:t._u([{key:"prev-text",fn:function(){return[o("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})]},proxy:!0},{key:"next-text",fn:function(){return[o("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})]},proxy:!0}],null,!0)})],1):t._e()])]}}],null,!0)},"VueGoodTable",e.tabla,!1))],1)})),1)],1),o("transition",{attrs:{name:"fade"}},[t.modal.state?o("v-modal",{attrs:{titulo:t.modal.titulo,size:t.modal.size,footer:t.modal.footer},on:{close:function(e){t.modal.state=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[o("b-overlay",{attrs:{show:t.overlay}},[o("b-button",{attrs:{variant:"success",disabled:t.overlay},on:{click:t.onSubmit}},[t._v(" "+t._s(t.modal.prop.row?"Guardar":"Crear")+" ")])],1)]},proxy:!0}],null,!1,1927607085)},[o(t.modal.is,t._b({ref:"modal",tag:"component"},"component",t.modal.prop,!1))],1):t._e()],1)],1)},i=[],n=o("c7eb"),l=o("1da1"),s=o("a2f9"),r=o("138a"),c=o("f617"),u=o("50eb"),p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ValidationObserver",{ref:"form"},[o("b-form",[t._l(t.inputs,(function(e){return[o("ValidationProvider",{attrs:{name:e.label,rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[o("b-form-group",{staticClass:"required",attrs:{label:e.label}},[o("b-form-input",{attrs:{type:"text",state:!(i.length>0)&&null},model:{value:e.value,callback:function(o){t.$set(e,"value",o)},expression:"input.value"}})],1)]}}],null,!0)})]}))],2)],1)},d=[],m=o("ade3"),b=(o("d3b7"),o("159b"),o("b64b"),o("223c")),f=o("7bb1"),v=o("4c93"),g={name:"ModalAccionesModulos",components:{ValidationProvider:f["b"],ValidationObserver:f["a"]},props:{prop:String,commit:String,row:Object,config:Object,inputs:{type:Object,default:function(){}}},data:function(){return Object(f["e"])("eager"),Object.keys(v).forEach((function(t){Object(f["c"])(t,v[t])})),{}},methods:{onSubmit:function(){var t=this;return new Promise((function(e){t.$refs["form"].validate().then((function(o){var a={};for(var i in t.row&&(a.id=t.row.id),t.inputs)Object.assign(a,Object(m["a"])({},i,t.inputs[i].value));Object.assign(t.config,{data:a}),o?t.$http(t.config).then((function(o){var a={prop:t.prop,value:o.data.data};t.$store.commit(t.row?"appRole/UPDATE_STATE":"appRole/ADD_STATE",a),t.$toast({component:b["a"],position:"top-center",props:{icon:"CheckCircleIcon",title:"Registro exitoso",variant:"success",text:"Datos registrado exitosamente"}}),e(!0)})).catch((function(o){console.error(o),t.$toast({component:b["a"],position:"top-center",props:{title:"Algo salio mal",icon:"AlertCircleIcon",variant:"danger",text:"Si el problema persiste actualiza la pagina, si el problema persiste comunicate con soporte"}}),e(!1)})):e(!1)}))}))}}},h=g,w=o("2877"),x=Object(w["a"])(h,p,d,!1,null,null,null),_=x.exports,A=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-form",[o("b-form-group",[o("b-form-checkbox-group",{attrs:{name:"action"},model:{value:t.data.actions,callback:function(e){t.$set(t.data,"actions",e)},expression:"data.actions"}},[o("b-row",{staticClass:"my-n10",attrs:{col:"",cols:"2"}},t._l(t.actions,(function(e){return o("b-col",{key:e.id,staticClass:"py-10"},[o("b-form-checkbox",{staticClass:"m-0",attrs:{value:e.id}},[t._v(t._s(e.title))])],1)})),1)],1)],1)],1)},C=[],y=o("b85c"),M={name:"ModalPermisosAcciones",props:{row:Object},data:function(){return{data:{actions:[],permission:this.row.id}}},computed:{actions:function(){return this.$store.state.appRole.actions}},mounted:function(){this.setActions()},methods:{setActions:function(){var t,e=Object(y["a"])(this.row.actions[0]);try{for(e.s();!(t=e.n()).done;){var o=t.value;this.data.actions.push(o.id)}}catch(a){e.e(a)}finally{e.f()}},onSubmit:function(){var t=this;return new Promise((function(e){t.$http({url:"api/auth/actions",method:"post",data:t.data}).then((function(o){var a={prop:"permissions",value:o.data.data};t.$store.commit("appRole/UPDATE_STATE",a),t.$toast({component:b["a"],position:"top-center",props:{icon:"CheckCircleIcon",title:"Permiso Actualizado",variant:"success",text:"Tu permiso se actualizo exitosamente"}}),e(!0)})).catch((function(o){console.error(o),t.$toast({component:b["a"],position:"top-center",props:{title:"Algo salio mal",icon:"AlertCircleIcon",variant:"danger",text:"Si el problema persiste actualiza la pagina, si el problema persiste comunicate con soporte"}}),e(!1)}))}))}}},O=M,R=Object(w["a"])(O,A,C,!1,null,null,null),j=R.exports,P=o("7a36"),k={name:"permission",mixins:[s["a"]],components:{VModal:r["a"],VueGoodTable:c["a"],ModalRoles:u["a"],ModalAccionesModulos:_,ModalPermisosAcciones:j,ModalPermisosRoles:P["a"]},data:function(){return{overlay:!1,modal:{state:!1},apiOptions:[{api:"appRole/getRoles",data:{}},{api:"appRole/getPermissionsActions",data:{}},{api:"appRole/getActions",data:{}},{api:"appRole/getModules",data:{}}]}},computed:{appRoles:function(){return this.$store.state.appRole},goodTable:function(){return[{titulo:"Roles",btn:{texto:"Crear Role",variant:"success",modal:{titulo:"Crear Role",is:"ModalRoles",prop:{inputs:{nombre:{label:"Nombre",value:null},descripcion:{label:"Descripción",type:"textarea",value:null}}}}},config:{prop:"",btn:[{texto:"Editar Role",variant:"info",modal:{nombre:"Editar Role",is:"ModalRoles",prop:{inputs:{nombre:{label:"Nombre",value:null},descripcion:{label:"Descripción",type:"textarea",value:null}}}}},{texto:"Editar Permisos",variant:"warning",modal:{titulo:"Editar Permisos",is:"ModalPermisosRoles"}}]},tabla:{columns:[{field:"id",label:"ID",width:"6em"},{field:"nombre",label:"Nombre",width:"18em"},{field:"descripcion",label:"Descripción"},{field:"settings",label:"Ajustes",width:"22em"}],rows:this.appRoles.roles,paginationOptions:{enabled:!0,perPage:10}}},{titulo:"Permisos",config:{btn:[{texto:"Asignar Acciones",variant:"warning",modal:{titulo:"Asignar Acciones",is:"ModalPermisosAcciones"}}]},tabla:{columns:[{field:"id",label:"ID",width:"6em"},{field:"title",label:"Tituló",width:"18em"},{field:"subject",label:"Modulo",width:"12em"},{field:"actions",label:"Acciones"},{field:"settings",label:"Ajustes",width:"12em"}],rows:this.appRoles.permissions,paginationOptions:{enabled:!0,perPage:10}}},{titulo:"Acciones",btn:{texto:"Crear Acción",variant:"success",modal:{titulo:"Crear Acción",is:"ModalAccionesModulos",prop:{prop:"actions",config:{url:"api/auth/actions-modules",method:"post"},inputs:{title:{label:"Tituló",value:null},action:{label:"Acción",value:null}}}}},config:{btn:[{texto:"Editar",variant:"info",modal:{titulo:"Editar Acción",is:"ModalAccionesModulos",prop:{prop:"actions",config:{url:"api/auth/actions-modules",method:"post"},inputs:{title:{label:"Tituló",value:null},action:{label:"Acción",value:null}}}}}]},tabla:{columns:[{field:"id",label:"ID",width:"6em"},{field:"title",label:"Tituló",width:"18em"},{field:"action",label:"Acción"},{field:"settings",label:"Ajustes",width:"8em"}],rows:this.appRoles.actions,paginationOptions:{enabled:!0,perPage:10}}},{titulo:"Modulos",btn:{texto:"Crear Modulo",variant:"success",modal:{titulo:"Crear Modulo",is:"ModalAccionesModulos",prop:{prop:"modules",config:{url:"api/auth/permissions-module",method:"post"},inputs:{title:{label:"Tituló",value:null},subject:{label:"Modulo",value:null}}}}},config:{btn:[{texto:"Editar",variant:"info",modal:{titulo:"Editar Modulo",is:"ModalAccionesModulos",prop:{prop:"modules",config:{url:"api/auth/permissions-module",method:"post"},inputs:{title:{label:"Tituló",value:null},subject:{label:"Modulo",value:null}}}}}]},tabla:{columns:[{field:"id",label:"ID",width:"6em"},{field:"title",label:"Tituló",width:"18em"},{field:"subject",label:"Modulo"},{field:"settings",label:"Ajustes",width:"8em"}],rows:this.appRoles.modules,paginationOptions:{enabled:!0,perPage:10}}}]}},mounted:function(){this.initApis(this.apiOptions)},methods:{onSubmit:function(){var t=this;return Object(l["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.overlay=!0,e.next=3,t.$refs["modal"].onSubmit().then((function(e){t.modal.state=!e}));case 3:t.overlay=!1;case 4:case"end":return e.stop()}}),e)})))()},openModal:function(t,e){if(t.prop||Object.assign(t,{prop:{}}),void 0==t.footer&&Object.assign(t,{footer:!0}),e&&(Object.assign(t.prop,{row:e}),t.prop.inputs))for(var o in t.prop.inputs)Object.assign(t.prop.inputs[o],{value:e[o]});Object.assign(this.modal,{state:!0},t)}}},T=k,$=Object(w["a"])(T,a,i,!1,null,"ea7c1818",null);e["default"]=$.exports}}]);
//# sourceMappingURL=chunk-2d237af5.fd3ea8c0.js.map