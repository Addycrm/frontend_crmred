(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c048a62"],{"0fcf":function(e,t,a){},"33aa":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.TableAllAgents?a("div",{attrs:{id:"TableAllAgents"}},[a("div",{staticClass:"mb-2",attrs:{"cols-lg":"5","cols-sm":"auto"}},[a("app-collapse",[a("app-collapse-item",{attrs:{title:"FILTRO GENERAL",isVisible:!0}},[a("div",{staticClass:"d-flex flex-wrap"},[a("b-col",{attrs:{cols:"12",md:"3"}},[a("b-form-group",{attrs:{label:"ID Agente"}},[a("b-form-input",{attrs:{value:e.query.idAgent,placeholder:"Buscar id...",type:"search",trim:""},on:{change:function(t){return e.setQuery("idAgent",t)}}})],1)],1),a("b-col",{attrs:{cols:"12",md:"3"}},[a("b-form-group",{attrs:{label:"Nombre Agente"}},[a("b-form-input",{attrs:{value:e.query.nameAgent,placeholder:"Buscar nombre...",type:"search",trim:""},on:{change:function(t){return e.setQuery("nameAgent",t)}}})],1)],1),a("b-col",{attrs:{cols:"12",md:"3"}},[a("b-form-group",{attrs:{label:"Correo Agente"}},[a("b-form-input",{attrs:{value:e.query.emailAgent,placeholder:"Buscar correo...",type:"email",trim:""},on:{change:function(t){return e.setQuery("emailAgent",t)}}})],1)],1),e.optionsPlans?a("b-col",{attrs:{cols:"12",md:"3"}},[a("b-form-group",{attrs:{label:"Plan"}},[a("v-select",{attrs:{options:e.optionsPlans,reduce:function(e){return e.id},label:"code"},model:{value:e.query.plans,callback:function(t){e.$set(e.query,"plans",t)},expression:"query.plans"}})],1)],1):e._e()],1)])],1)],1),a("b-row",[a("b-col",{staticClass:"d-flex justify-content-center justify-content-md-end",attrs:{cols:"12"}},[a("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.openModalForm()}}},[a("svg",{style:{width:"1.25em",height:"1em",margin:"-0.5em",marginRight:"0.4rem",fontSize:"1em"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor"}},[a("path",{attrs:{d:"M432 256c0 17.69-14.33 32.01-32 32.01H256v144c0 17.69-14.33 31.99-32 31.99s-32-14.3-32-31.99v-144H48c-17.67 0-32-14.32-32-32.01s14.33-31.99 32-31.99H192v-144c0-17.69 14.33-32.01 32-32.01s32 14.32 32 32.01v144h144C417.7 224 432 238.3 432 256z"}})]),a("span",[e._v(" Crear agente ")])])],1),a("b-col",{staticClass:"mx-auto my-1",attrs:{cols:"auto"}},[e._v(" Clientes: "),a("b",{staticClass:"text-primary"},[e._v(e._s(e.TableAllAgents.to))]),e._v(" de "),a("b",[e._v(e._s(e.TableAllAgents.total))])]),a("b-col",{attrs:{cols:"12"}},[e.agentsAllSelected.length>0?a("h5",[e._v("Has seleccionado: "+e._s(e.agentsAllSelected.length))]):e._e(),a("b-table",{ref:"selectableTable",attrs:{hover:"",small:"",bordered:"",responsive:"","head-variant":"primary",items:e.ListAllAgents,"thead-class":"primaryColor",fields:e.fields,"select-mode":e.selectMode,selectable:"","selected-variant":"success","no-select-on-click":""},scopedSlots:e._u([{key:"head(id)",fn:function(t){return[a("div",{staticClass:"header"},[a("span",[e._v(e._s(t.label))])])]}},{key:"head(created_at)",fn:function(t){return[a("div",{staticClass:"header"},[a("span",[e._v(e._s(t.label))])])]}},{key:"head(foto_persona)",fn:function(t){return[a("div",{staticClass:"header"},[a("span",[e._v(e._s(t.label))])])]}},{key:"head(primer_nombre)",fn:function(t){return[a("div",{staticClass:"header"},[a("span",[e._v(e._s(t.label))])])]}},{key:"head(email)",fn:function(t){return[a("div",{staticClass:"header"},[a("span",[e._v(e._s(t.label))])])]}},{key:"head(empresa.nombre)",fn:function(t){return[a("div",{staticClass:"header"},[a("span",[e._v(e._s(t.label))])])]}},{key:"head(code)",fn:function(t){return[a("div",{staticClass:"header"},[a("span",[e._v(e._s(t.label))])])]}},{key:"head(action)",fn:function(t){return[a("div",{staticClass:"header"},[a("span",[e._v(e._s(t.label))])])]}},{key:"cell(foto_persona)",fn:function(e){return[a("b-avatar",{attrs:{src:e.value}})]}},{key:"cell(created_at)",fn:function(t){return[a("span",{staticStyle:{"font-size":"0.9em"}},[e._v(e._s(e._f("fechaFormating")(t.item.created_at))+" ("+e._s(e.dateCounter(t.item.created_at))+") ")])]}},{key:"cell(payment_plans.code)",fn:function(t){return["GRATIS"==t.item.payment_plans.code?a("b-badge",{attrs:{variant:"primary"}},[e._v(" "+e._s(t.item.payment_plans.code)+" ")]):"ESTANDAR"==t.item.payment_plans.code?a("b-badge",{attrs:{variant:"info"}},[e._v(" "+e._s(t.item.payment_plans.code)+" ")]):"ELITE"==t.item.payment_plans.code?a("b-badge",{attrs:{variant:"warning"}},[a("svg",{staticClass:"icon icon-tabler icon-tabler-chess-queen",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"20",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"#ffffff",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}},[a("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),a("path",{attrs:{d:"M16 16l2 -11l-4 4l-2 -5l-2 5l-4 -4l2 11"}}),a("path",{attrs:{d:"M8 16l-1.447 .724a1 1 0 0 0 -.553 .894v2.382h12v-2.382a1 1 0 0 0 -.553 -.894l-1.447 -.724h-8z"}}),a("path",{attrs:{d:"M12 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}}),a("path",{attrs:{d:"M6 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}}),a("path",{attrs:{d:"M18 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}})]),e._v(" "+e._s(t.item.payment_plans.code)+" ")]):e._e()]}},{key:"cell(action)",fn:function(t){return[a("div",{staticClass:"actions__btns"},[a("b-button",{attrs:{variant:"outline-success"},on:{click:function(a){return e.addAgent(t)}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"16",height:"16",fill:"currentColor"}},[a("path",{attrs:{d:"M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM504 312V248H440c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V136c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H552v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"}})]),e._v(" Agregar ")]),a("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:function(a){return e.deleteAgent(t)}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"16",height:"16",fill:"currentColor"}},[a("path",{attrs:{d:"M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM472 200H616c13.3 0 24 10.7 24 24s-10.7 24-24 24H472c-13.3 0-24-10.7-24-24s10.7-24 24-24z"}})]),e._v(" Eliminar ")])],1)]}},{key:"cell(edict)",fn:function(t){return[a("b-button",{staticClass:"btn-icon d-flex justify-content-center align-items-center",on:{click:function(a){return e.info(a.targuet,t.item)}}},[a("svg",{style:{width:"1.25em",height:"1em",margin:"-0.5em",fontSize:"14px"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor"}},[a("path",{attrs:{d:"M490.3 40.4C512.2 62.27 512.2 97.73 490.3 119.6L460.3 149.7L362.3 51.72L392.4 21.66C414.3-.2135 449.7-.2135 471.6 21.66L490.3 40.4zM172.4 241.7L339.7 74.34L437.7 172.3L270.3 339.6C264.2 345.8 256.7 350.4 248.4 353.2L159.6 382.8C150.1 385.6 141.5 383.4 135 376.1C128.6 370.5 126.4 361 129.2 352.4L158.8 263.6C161.6 255.3 166.2 247.8 172.4 241.7V241.7zM192 63.1C209.7 63.1 224 78.33 224 95.1C224 113.7 209.7 127.1 192 127.1H96C78.33 127.1 64 142.3 64 159.1V416C64 433.7 78.33 448 96 448H352C369.7 448 384 433.7 384 416V319.1C384 302.3 398.3 287.1 416 287.1C433.7 287.1 448 302.3 448 319.1V416C448 469 405 512 352 512H96C42.98 512 0 469 0 416V159.1C0 106.1 42.98 63.1 96 63.1H192z"}})])])]}}],null,!1,4285517984)})],1)],1),e.optionsPlans?a("b-row",{staticClass:"d-flex align-items-center"},[a("b-col",{attrs:{md:"4",sm:"10"}},[a("h6",[e._v("Seleccionar el plan que desea cambiar")]),a("v-select",{attrs:{label:"code",options:e.optionsPlans},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),a("div"),a("b-button",{staticClass:"d-inline-flex align-items-center btn__change",attrs:{variant:"primary",size:"md"},on:{click:e.verificationData}},[e._v("Cambiar plan "),e.agentsAllSelected.length>0?a("span",{staticClass:"label__btn"},[e._v(e._s(e.agentsAllSelected.length))]):e._e()])],1):e._e(),e.stateModal?a("v-modal",{attrs:{titulo:"Cambio de Membresia",center:"",size:"xs"},on:{close:function(){return e.stateModal=!1}}},[a("modalVerificationAgent",{tag:"component",attrs:{selected:e.selected},on:{closeModal:e.closeModal}})],1):e._e(),e.stateModalFormAgent?a("v-modal",{attrs:{titulo:"Crear Agente",center:"",size:"xs",footer:""},on:{close:function(){return e.stateModalFormAgent=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("b-overlay",{attrs:{show:e.overlay}},[a("b-button",{attrs:{variant:"success",disabled:e.overlay},on:{click:e.onSubmit}},[e._v(" Guardar ")])],1)]},proxy:!0}],null,!1,656704030)},[a("FormUser",{ref:"modal",tag:"component"})],1):e._e(),a("div",{staticClass:"d-flex flex-wrap align-items-center mt-1"},[a("div",{staticClass:"d-flex"},[e.TableAllAgents.per_page<e.TableAllAgents.total?a("b-pagination",{attrs:{value:e.currentPage,"per-page":e.TableAllAgents.per_page,"total-rows":e.TableAllAgents.total,"first-number":"","last-number":"","prev-class":"prev-arrow","next-class":"next-arrow"},on:{change:e.getAgents},scopedSlots:e._u([{key:"prev-text",fn:function(){return[a("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})]},proxy:!0}],null,!1,1308952388)}):e._e()],1)]),a("transition",{attrs:{name:"fade"}},[e.modal.state?a("v-modal",{attrs:{titulo:e.modal.titulo,size:e.modal.size,footer:e.modal.footer},on:{close:function(t){e.modal.state=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("b-overlay",{attrs:{show:e.overlay}},[a("b-button",{attrs:{variant:"success",disabled:e.overlay},on:{click:e.onSubmit}},[e._v(" "+e._s(e.modal.prop.row?"Guardar":"Crear")+" ")])],1)]},proxy:!0}],null,!1,1927607085)},[a(e.modal.is,{ref:"modal",tag:"component",attrs:{row:e.modal.prop}})],1):e._e()],1),a("userFormAgentComponent",{ref:"userFormAgentComponent"})],1):e._e()},o=[],n=a("c7eb"),s=a("1da1"),l=a("7088"),i=a("4a7a"),c=a.n(i),u=a("69c4"),d=a("c38f"),p=a.n(d),m=a("749f"),f=a.n(m),b=a("4984"),h=a("138a"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-form",{attrs:{id:"FormUser"}},[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Género"}},[a("b-radio-group",{attrs:{name:"genero"},model:{value:e.form.genero,callback:function(t){e.$set(e.form,"genero",t)},expression:"form.genero"}},[e._l(e.storeConfig.gender,(function(t){return[a("b-form-radio",{key:t.id,attrs:{state:e.errorState(r),value:t.id}},[e._v(" "+e._s(t.name)+" ")])]}))],2)],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Nombre completo"}},[a("b-form-input",{attrs:{state:e.errorState(r),trim:""},model:{value:e.form.primer_nombre,callback:function(t){e.$set(e.form,"primer_nombre",t)},expression:"form.primer_nombre"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Tipo de Documento",state:!(r.length>0)}},[a("v-select",{attrs:{"input-id":"tipo_documento",label:"nombre",options:e.storeConfig.document_type,reduce:function(e){return e.id},clearable:!1},model:{value:e.form.tipo_identificacion,callback:function(t){e.$set(e.form,"tipo_identificacion",t)},expression:"form.tipo_identificacion"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"N° de Identificación"}},[a("b-form-input",{attrs:{state:e.errorState(r),trim:""},model:{value:e.form.cedula_persona,callback:function(t){e.$set(e.form,"cedula_persona",t)},expression:"form.cedula_persona"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Role",state:!(r.length>0)}},[a("v-select",{attrs:{label:"nombre",options:e.roles,reduce:function(e){return e.id},clearable:!1},model:{value:e.form.roles,callback:function(t){e.$set(e.form,"roles",t)},expression:"form.roles"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Plan",state:!(r.length>0)}},[a("v-select",{attrs:{label:"code",options:e.optionsPlans,reduce:function(e){return e.id},clearable:!1},model:{value:e.form.plan,callback:function(t){e.$set(e.form,"plan",t)},expression:"form.plan"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"E-mail"}},[a("b-form-input",{attrs:{state:e.errorState(r),trim:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Celular"}},[a("vue-phone-number-input",{ref:"inputCelular",attrs:{error:r.length>0,"show-code-on-list":"","default-country-code":"CO","preferred-countries":["CO"],translations:{countrySelectorLabel:"Código país",countrySelectorError:"Elije un código",phoneNumberLabel:"Celular",example:"Ejemplo :"}},on:{update:function(t){e.form.celular_movil=t.nationalNumber,e.wame.number=t.e164,e.wame.state&&(e.phone.celular_whatsapp=t.e164),e.exampleLabel(t)}},model:{value:e.phone.celular_movil,callback:function(t){e.$set(e.phone,"celular_movil",t)},expression:"phone.celular_movil"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"WhatsApp"}},[a("vue-phone-number-input",{ref:"whatsapp",attrs:{error:r.length>0,"show-code-on-list":"","default-country-code":"CO","preferred-countries":["CO"],translations:{countrySelectorLabel:"Código país",countrySelectorError:"Elije un código",phoneNumberLabel:"WhatsApp",example:"Ejemplo :"},disabled:e.wame.state},on:{update:function(t){e.form.celular_whatsapp=t.e164}},model:{value:e.phone.celular_whatsapp,callback:function(t){e.$set(e.phone,"celular_whatsapp",t)},expression:"phone.celular_whatsapp"}})],1)]}}],null,!0)}),a("b-form-checkbox",{staticClass:"mb-0 mt-1",attrs:{id:"wame",name:"wame"},model:{value:e.wame.state,callback:function(t){e.$set(e.wame,"state",t)},expression:"wame.state"}},[e._v(" Usar el mismo numero de Celular ")])],1),a("b-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Dirección"}},[a("b-form-input",{attrs:{state:e.errorState(r),trim:""},model:{value:e.form.direccion_persona,callback:function(t){e.$set(e.form,"direccion_persona",t)},expression:"form.direccion_persona"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"4"}},[a("ValidationProvider",{attrs:{name:"País",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"País",state:!(r.length>0)}},[a("v-select",{attrs:{label:"name",options:e.storeConfig.country,reduce:function(e){return e.id},clearable:!1},on:{input:function(t){return e.resetUbicacion("id_pais")}},model:{value:e.ubicaciones["id_pais"].value,callback:function(t){e.$set(e.ubicaciones["id_pais"],"value",t)},expression:"ubicaciones['id_pais'].value"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"4"}},[a("ValidationProvider",{attrs:{name:"Departamento",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Departamento",state:!(r.length>0)}},[a("v-select",{attrs:{label:"name",options:e.ubicaciones["id_estado"].options,reduce:function(e){return e.id},disabled:0==e.ubicaciones["id_estado"].options.length,clearable:!1},on:{input:function(t){return e.resetUbicacion("id_estado")}},model:{value:e.ubicaciones["id_estado"].value,callback:function(t){e.$set(e.ubicaciones["id_estado"],"value",t)},expression:"ubicaciones['id_estado'].value"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"4"}},[a("ValidationProvider",{attrs:{name:"Ciudad",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Ciudad",state:!(r.length>0)}},[a("v-select",{attrs:{label:"name",options:e.ubicaciones["id_ciudad"].options,reduce:function(e){return e.id},clearable:!1,disabled:0==e.ubicaciones["id_ciudad"].options.length},on:{input:function(t){return e.resetUbicacion("id_ciudad")}},model:{value:e.ubicaciones["id_ciudad"].value,callback:function(t){e.$set(e.ubicaciones["id_ciudad"],"value",t)},expression:"ubicaciones['id_ciudad'].value"}})],1)]}}],null,!0)})],1)],1),t.failed?a("div",{staticClass:"list-error"},[a("div",{staticClass:"alert alert-danger p-1 mb-0 flex-grow-1 text-center",style:{fontSize:"14px"}},[a("p",[e._v("Uno o más campos obligatorios se encuentran vacios, Valida e intenta nuevamente. ")])])]):e._e()]}}])})],1)},g=[],_=a("ade3"),C=(a("d3b7"),a("159b"),a("b64b"),a("ac1f"),a("5319"),a("fb6a"),a("b0c0"),a("a434"),a("223c")),w=a("7bb1"),y=a("4c93"),k={name:"FormUser",components:{ValidationProvider:w["b"],ValidationObserver:w["a"],vSelect:c.a},props:{row:Object,type:{type:String,default:function(){return"user"}},propPath:{type:Object}},data:function(){return Object(w["e"])("eager"),Object.keys(y).forEach((function(e){Object(w["c"])(e,y[e])})),{exampleNumber:10,phone:{celular_movil:null,celular_whatsapp:null},wame:{state:!1,number:null},form:{foto_persona:"https://crmred.co/storage/1671656115-png",primer_nombre:null,tipo_identificacion:null,cedula_persona:null,roles:null,plan:null,tipo_cliente:null,genero:null,email:null,celular_movil:null,celular_whatsapp:null,direccion_persona:null,id_pais:null,id_estado:null,id_ciudad:null},ubicaciones:{id_pais:{value:null,props:{api:"appLocalidades/getStates",name:"Departamentos"}},id_estado:{value:null,options:[],props:{api:"appLocalidades/getCiudades",name:"Ciudades"}},id_ciudad:{options:[],value:null}}}},watch:{"wame.state":function(e){e&&(this.form.celular_whatsapp=this.wame.number,this.phone.celular_whatsapp=this.phone.celular_movil)},"phone.celular_movil":function(){this.phone.celular_movil=this.validateLengthNum(this.phone.celular_movil)},"phone.celular_whatsapp":function(){this.phone.celular_whatsapp=this.validateLengthNum(this.phone.celular_whatsapp)}},computed:{storeConfig:function(){return this.$store.state.appConfiguracion.options},roles:function(){return this.$store.state.appUser.roles_users},optionsPlans:function(){return this.$store.state.appAgents.optionsPlans}},mounted:function(){this.watchUbicaciones()},methods:{validateLengthNum:function(e){if(null!=e){var t=e.replace(/\s+/g,"");return t.length>=this.exampleNumber?t.slice(0,this.exampleNumber):e}},exampleLabel:function(e){var t=this.$refs["inputCelular"].$children[1].$refs.label.innerText;"Celular"!=t&&(t=t.split(":")[1].replace(/\s+/g,""),this.exampleNumber=t.length)},errorState:function(e){return!(e.length>0)&&null},onSubmit:function(){var e=this;return new Promise((function(t){e.$refs["form"].validate().then((function(a){a?(e.row&&Object.assign(e.form,{id:e.row.id}),e.$store.dispatch("appAgents/createAgentMembership",e.form).then((function(a){a.succes?e.$toast({component:C["a"],position:"top-center",props:{icon:"CheckCircleIcon",title:"Agente Registrado",variant:"success",text:"El Agente fue registrado exitosamente"}}):e.$toast({component:C["a"],position:"top-center",props:{title:"Algo salio mal",icon:"AlertCircleIcon",variant:"danger",text:"Si el problema persiste actualiza la pagina, si el problema persiste comunicate con soporte"}}),t(a)}))):t(a)}))}))},watchUbicaciones:function(){var e=this,t=function(t){e.$watch((function(){return e.ubicaciones[t].value}),(function(a){Object.assign(e.form,Object(_["a"])({},t,a));var r=Object.keys(e.ubicaciones);if(t!=r[r.length-1]&&null!=a){var o=r.indexOf(t);e.getUbicacion({codigo:a,prop:r[o+1],api:e.ubicaciones[t].props.api,name:e.ubicaciones[t].props.name})}}))};for(var a in this.ubicaciones)t(a)},resetUbicacion:function(e){var t=Object.keys(this.ubicaciones),a=t.indexOf(e);t.shift(),t.splice(0,a);for(var r=0,o=t;r<o.length;r++){var n=o[r];Object.assign(this.form,Object(_["a"])({},n,null)),Object.assign(this.ubicaciones[n],{value:null,options:[]})}},getUbicacion:function(e){var t=this;return Object(s["a"])(Object(n["a"])().mark((function a(){var r,o,s,l;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.codigo,o=e.api,s=e.name,l=e.prop,a.next=3,t.$store.dispatch(o,{codigo:r}).then((function(e){t.ubicaciones[l].options=e})).catch((function(e){console.error(s,e)}));case 3:case"end":return a.stop()}}),a)})))()}}},x=k,S=a("2877"),A=Object(S["a"])(x,v,g,!1,null,"3d052ee4",null),O=A.exports,j=a("a2f9"),q=a("c4e2"),$=a("adbc"),P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:e.infoModal.id,attrs:{id:e.infoModal.id,size:"lg","ok-title":"Guardar","cancel-title":"Cancelar",centered:"","no-close-on-backdrop":""},on:{ok:e.onSubmit},scopedSlots:e._u([{key:"modal-title",fn:function(){return[a("span",{staticClass:"tituloModalInmueble"},[e._v("Seleccionar cliente")])]},proxy:!0}])},[a("b-form",{attrs:{id:"FormUser"}},[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Género"}},[a("b-radio-group",{attrs:{name:"genero"},model:{value:e.form.genero.id,callback:function(t){e.$set(e.form.genero,"id",t)},expression:"form.genero.id"}},[e._l(e.storeConfig.gender,(function(t){return[a("b-form-radio",{key:t.id,attrs:{state:e.errorState(r),value:t.id}},[e._v(" "+e._s(t.name)+" ")])]}))],2)],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Nombre completo"}},[a("b-form-input",{attrs:{state:e.errorState(r),trim:""},model:{value:e.form.primer_nombre,callback:function(t){e.$set(e.form,"primer_nombre",t)},expression:"form.primer_nombre"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Tipo de Documento",state:!(r.length>0)}},[a("v-select",{attrs:{"input-id":"tipo_documento",label:"nombre",options:e.storeConfig.document_type,reduce:function(e){return e.id},clearable:!1},model:{value:e.form.tipo_identificacion,callback:function(t){e.$set(e.form,"tipo_identificacion",t)},expression:"form.tipo_identificacion"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"N° de Identificación"}},[a("b-form-input",{attrs:{state:e.errorState(r),trim:""},model:{value:e.form.cedula_persona,callback:function(t){e.$set(e.form,"cedula_persona",t)},expression:"form.cedula_persona"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Role",state:!(r.length>0)}},[a("v-select",{attrs:{label:"nombre",options:e.roles,reduce:function(e){return e.id},clearable:!1},model:{value:e.form.roles,callback:function(t){e.$set(e.form,"roles",t)},expression:"form.roles"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Plan",state:!(r.length>0)}},[a("v-select",{attrs:{label:"code",options:e.optionsPlans,reduce:function(e){return e.id},clearable:!1},model:{value:e.form.payment_plans,callback:function(t){e.$set(e.form,"payment_plans",t)},expression:"form.payment_plans"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"E-mail"}},[a("b-form-input",{attrs:{state:e.errorState(r),trim:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Celular"}},[a("vue-phone-number-input",{ref:"inputCelular",attrs:{error:r.length>0,"show-code-on-list":"","default-country-code":"CO","preferred-countries":["CO"],translations:{countrySelectorLabel:"Código país",countrySelectorError:"Elije un código",phoneNumberLabel:"Celular",example:"Ejemplo :"}},on:{update:function(t){e.form.celular_movil=t.nationalNumber,e.wame.number=t.e164,e.wame.state&&(e.phone.celular_whatsapp=t.e164),e.exampleLabel(t)}},model:{value:e.form.celular_movil,callback:function(t){e.$set(e.form,"celular_movil",t)},expression:"form.celular_movil"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"WhatsApp"}},[a("vue-phone-number-input",{ref:"whatsapp",attrs:{error:r.length>0,"show-code-on-list":"","default-country-code":"CO","preferred-countries":["CO"],translations:{countrySelectorLabel:"Código país",countrySelectorError:"Elije un código",phoneNumberLabel:"WhatsApp",example:"Ejemplo :"},disabled:e.wame.state},on:{update:function(t){e.form.celular_whatsapp=t.e164}},model:{value:e.form.celular_whatsapp,callback:function(t){e.$set(e.form,"celular_whatsapp",t)},expression:"form.celular_whatsapp"}})],1)]}}],null,!0)}),a("b-form-checkbox",{staticClass:"mb-0 mt-1",attrs:{id:"wame",name:"wame"},model:{value:e.wame.state,callback:function(t){e.$set(e.wame,"state",t)},expression:"wame.state"}},[e._v(" Usar el mismo numero de Celular ")])],1),a("b-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Dirección"}},[a("b-form-input",{attrs:{state:e.errorState(r),trim:""},model:{value:e.form.direccion_persona,callback:function(t){e.$set(e.form,"direccion_persona",t)},expression:"form.direccion_persona"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"4"}},[a("ValidationProvider",{attrs:{name:"País",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"País",state:!(r.length>0)}},[a("v-select",{attrs:{label:"name",options:e.storeConfig.country,reduce:function(e){return e.id},clearable:!1},on:{input:function(t){return e.resetUbicacion("id_pais")}},model:{value:e.form.id_pais,callback:function(t){e.$set(e.form,"id_pais",t)},expression:"form.id_pais"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"4"}},[a("ValidationProvider",{attrs:{name:"Departamento",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Departamento",state:!(r.length>0)}},[a("v-select",{attrs:{label:"name",options:e.ubicaciones["id_estado"].options,reduce:function(e){return e.id},disabled:0==e.ubicaciones["id_estado"].options.length,clearable:!1},on:{input:function(t){return e.resetUbicacion("id_estado")}},model:{value:e.form.id_estado,callback:function(t){e.$set(e.form,"id_estado",t)},expression:"form.id_estado"}})],1)]}}],null,!0)})],1),a("b-col",{attrs:{cols:"12",md:"4"}},[a("ValidationProvider",{attrs:{name:"Ciudad",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("b-form-group",{staticClass:"required",attrs:{label:"Ciudad",state:!(r.length>0)}},[a("v-select",{attrs:{label:"name",options:e.ubicaciones["id_ciudad"].options,reduce:function(e){return e.id},clearable:!1,disabled:0==e.ubicaciones["id_ciudad"].options.length},on:{input:function(t){return e.resetUbicacion("id_ciudad")}},model:{value:e.form.id_ciudad,callback:function(t){e.$set(e.form,"id_ciudad",t)},expression:"form.id_ciudad"}})],1)]}}],null,!0)})],1)],1),t.failed?a("div",{staticClass:"list-error"},[a("div",{staticClass:"alert alert-danger p-1 mb-0 flex-grow-1 text-center",style:{fontSize:"14px"}},[a("p",[e._v("Uno o más campos obligatorios se encuentran vacios, Valida e intenta nuevamente. ")])])]):e._e()]}}])})],1)],1)},M=[],V=a("5530"),L={name:"userFormAgentComponent",components:{ValidationProvider:w["b"],ValidationObserver:w["a"],vSelect:c.a},props:{row:Object,type:{type:String,default:function(){return"user"}},propPath:{type:Object}},data:function(){return Object(w["e"])("eager"),Object.keys(y).forEach((function(e){Object(w["c"])(e,y[e])})),{infoModal:{id:"modal-form-agent",title:"",content:{},contentPreguntas:{}},exampleNumber:10,phone:{celular_movil:null,celular_whatsapp:null},wame:{state:!1,number:null},form:{foto_persona:"https://crmred.co/storage/1671656115-png",primer_nombre:null,tipo_identificacion:null,cedula_persona:null,roles:null,plan:null,tipo_cliente:null,genero:null,email:null,celular_movil:null,celular_whatsapp:null,direccion_persona:null,id_pais:null,id_estado:null,id_ciudad:null},ubicaciones:{id_pais:{value:null,props:{api:"appLocalidades/getStates",name:"Departamentos"}},id_estado:{value:null,options:[],props:{api:"appLocalidades/getCiudades",name:"Ciudades"}},id_ciudad:{options:[],value:null}}}},watch:{"wame.state":function(e){e&&(this.form.celular_whatsapp=this.wame.number,this.phone.celular_whatsapp=this.phone.celular_movil)},"phone.celular_movil":function(){this.phone.celular_movil=this.validateLengthNum(this.phone.celular_movil)},"phone.celular_whatsapp":function(){this.phone.celular_whatsapp=this.validateLengthNum(this.phone.celular_whatsapp)}},computed:{storeConfig:function(){return this.$store.state.appConfiguracion.options},roles:function(){return this.$store.state.appUser.roles_users},optionsPlans:function(){return this.$store.state.appAgents.optionsPlans}},mounted:function(){this.watchUbicaciones()},methods:{validateLengthNum:function(e){if(null!=e){var t=e.replace(/\s+/g,"");return t.length>=this.exampleNumber?t.slice(0,this.exampleNumber):e}},info:function(e,t){var a=this;return Object(s["a"])(Object(n["a"])().mark((function r(){return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a.form=Object(V["a"])({},t),!a.form.id_pais){r.next=4;break}return r.next=4,a.getUbicacion({codigo:a.form.id_pais.id,prop:"id_estado",api:a.ubicaciones.id_pais.props.api,name:a.ubicaciones.id_pais.props.name});case 4:if(!a.form.id_ciudad){r.next=7;break}return r.next=7,a.getUbicacion({codigo:a.form.id_estado.id,prop:"id_ciudad",api:a.ubicaciones.id_estado.props.api,name:a.ubicaciones.id_estado.props.name});case 7:a.$root.$emit("bv::show::modal",a.infoModal.id,e);case 8:case"end":return r.stop()}}),r)})))()},exampleLabel:function(e){var t=this.$refs["inputCelular"].$children[1].$refs.label.innerText;"Celular"!=t&&(t=t.split(":")[1].replace(/\s+/g,""),this.exampleNumber=t.length)},setForm:function(e){for(var t in this.form)if(e[t])switch(t){default:Object.assign(this.form,Object(_["a"])({},t,e[t].id?e[t].id:e[t]))}this.phone["celular_movil"]==this.phone["celular_whatsapp"]&&Object.assign(this.wame,{state:!0,number:e["celular_whatsapp"]})},errorState:function(e){return!(e.length>0)&&null},onSubmit:function(){var e=this;return new Promise((function(t){e.$refs["form"].validate().then((function(a){a?(e.row&&Object.assign(e.form,{id:e.row.id}),e.$store.dispatch("appAgents/createAgentMembership",e.form).then((function(a){a.succes?e.$toast({component:C["a"],position:"top-center",props:{icon:"CheckCircleIcon",title:"Agente Registrado",variant:"success",text:"El Agente fue registrado exitosamente"}}):e.$toast({component:C["a"],position:"top-center",props:{title:"Algo salio mal",icon:"AlertCircleIcon",variant:"danger",text:"Si el problema persiste actualiza la pagina, si el problema persiste comunicate con soporte"}}),t(a)}))):t(a)}))}))},watchUbicaciones:function(){var e=this;console.log("hola");var t=function(t){e.$watch((function(){return e.ubicaciones[t].value}),(function(a){Object.assign(e.form,Object(_["a"])({},t,a));var r=Object.keys(e.ubicaciones);if(t!=r[r.length-1]&&null!=a){var o=r.indexOf(t);e.getUbicacion({codigo:a,prop:r[o+1],api:e.ubicaciones[t].props.api,name:e.ubicaciones[t].props.name})}}))};for(var a in this.ubicaciones)t(a)},resetUbicacion:function(e){var t=Object.keys(this.ubicaciones),a=t.indexOf(e);t.shift(),t.splice(0,a);for(var r=0,o=t;r<o.length;r++){var n=o[r];Object.assign(this.form,Object(_["a"])({},n,null)),Object.assign(this.ubicaciones[n],{value:null,options:[]})}},getUbicacion:function(e){var t=this;return Object(s["a"])(Object(n["a"])().mark((function a(){var r,o,s,l;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.codigo,o=e.api,s=e.name,l=e.prop,a.next=3,t.$store.dispatch(o,{codigo:r}).then((function(e){t.ubicaciones[l].options=e})).catch((function(e){console.error(s,e)}));case 3:case"end":return a.stop()}}),a)})))()}}},U=L,E=Object(S["a"])(U,P,M,!1,null,"7a18637c",null),N=E.exports,z=a("c1df"),F=a.n(z),T=(a("898b"),{name:"membership",mixins:[l["a"],j["a"]],components:{vSelect:c.a,modalVerificationAgent:u["a"],flatPickr:p.a,AppCollapse:q["a"],AppCollapseItem:$["a"],VModal:h["a"],userFormAgentComponent:N,FormUser:O},data:function(){return{modal:{state:!1},fields:[{key:"id",label:"Id"},{key:"created_at",label:"Fecha creación"},{key:"foto_persona",label:"imagen"},{key:"primer_nombre",label:"Nombre"},{key:"email",label:"correo"},{key:"empresa.nombre",label:"Nombre empresa"},{key:"payment_plans.code",label:"Membresia"},{key:"action",label:"Acciones"},{key:"edict",label:"Editar"}],apiOptions:[{api:"appUser/getUsers",data:{}},{api:"appUser/getRolesUsers",data:{}}],stateModalFormAgent:!1,stateModalFormAgentEdit:!1,stateModal:!1,selectMode:"multi",search:0,copySelected:[],selected:null,locale:b["Spanish"],plugins:[new f.a({confirmText:"Agregar",showAlways:!0,theme:"dark"})],query:{titulo_inmueble:null}}},computed:{config:function(){return{prop:"",btn:[{variant:"success",texto:"Editar Agente",modal:{titulo:"Editar Agente",is:"FormUser"}}]}}},filters:{fechaFormating:function(e){if(e){var t=F()(e).format("L");return t}}},updated:function(){this.validateCheck()},mounted:function(){this.initApis(this.apiOptions)},methods:{info:function(e,t){return this.$refs.userFormAgentComponent.info(e,t)},onSubmit:function(){var e=this;return Object(s["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.overlay=!0,t.next=3,e.$refs["modal"].onSubmit().then((function(t){e.modal.state=!t}));case 3:e.overlay=!1;case 4:case"end":return t.stop()}}),t)})))()},openModalForm:function(){this.stateModalFormAgent=!0},closeModal:function(){this.stateModal=!1,this.getAlLAgents()},verificationData:function(){this.selectallAgents.length>0?this.stateModal=!0:this.$bvToast.toast("No has seleccionado ningun agente",{title:"Información",variant:"danger",solid:!0})},dateCounter:function(e){var t=new Date(e).getTime(),a=F()(t);return F()(a,"YYYYMMDD").fromNow()},openModal:function(e,t){void 0==e.footer&&Object.assign(e,{footer:!0}),e.prop||Object.assign(e,{prop:{}}),t&&Object.assign(e.prop,{row:t}),Object.assign(this.modal,{state:!0},e)}}}),D=T,I=(a("72de"),a("9207"),Object(S["a"])(D,r,o,!1,null,"a7c58cda",null));t["default"]=I.exports},"72de":function(e,t,a){"use strict";a("8859")},8859:function(e,t,a){},9207:function(e,t,a){"use strict";a("0fcf")}}]);
//# sourceMappingURL=chunk-5c048a62.0f83247a.js.map