(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e4a321c"],{"07f6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth-wrapper auth-v1 px-2"},[a("div",{staticClass:"auth-inner py-2"},[a("b-overlay",{attrs:{show:t.overlay,rounded:"sm"}},[a("b-card",{staticClass:"mb-0"},[a("router-link",{staticClass:"brand-logo",attrs:{to:{name:"inicio-home"}}},[a("b-img",{attrs:{fluid:"",src:t.appLogoImage,alt:"logo"}})],1),a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.handleSubmit;return[a("b-form",{staticClass:"auth-login-form mt-2",on:{submit:function(e){return e.preventDefault(),n(t.onSubmit)}}},[a("h3",{staticClass:"text-center mb-1"},[t._v("Acceder")]),a("b-form-group",{attrs:{label:"Correo electrónico","label-for":"login-email"}},[a("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-form-input",{attrs:{id:"login-email",name:"login-email",placeholder:"correo@empresa.com",trim:""},model:{value:t.login.email,callback:function(e){t.$set(t.login,"email",e)},expression:"login.email"}}),a("b-form-invalid-feedback",{attrs:{state:!(n.length>0)}},[t._v(" Registra un correo electrónico valido ")])]}}],null,!0)})],1),a("b-form-group",{attrs:{label:"Contraseña","label-for":"login-password"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[a("b-input-group",{staticClass:"input-group-merge"},[a("b-form-input",{staticClass:"form-control-merge",attrs:{id:"login-password",type:t.passwordFieldType,name:"login-password",placeholder:"Contraseña",trim:""},model:{value:t.login.password,callback:function(e){t.$set(t.login,"password",e)},expression:"login.password"}}),a("b-input-group-append",{attrs:{"is-text":""}},[a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:t.passwordToggleIcon},on:{click:t.togglePasswordVisibility}})],1)],1),a("b-link",{attrs:{to:{name:"auth-forgot-password"}}},[a("small",[t._v("Olvidaste tu contraseña?")])]),a("b-form-invalid-feedback",{attrs:{state:!(n.length>0)}},[t._v(" Registra una contraseña ")])]}}],null,!0)})],1),a("b-form-group",[a("b-form-checkbox",{attrs:{id:"remember-me",name:"login"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[t._v(" Mantener sesión abierta ")])],1),a("b-button",{attrs:{type:"submit",variant:"primary",block:""}},[t._v(" Iniciar sesión ")])],1)]}}])}),a("b-card-text",{staticClass:"text-center mt-2"},[a("span",[t._v("¿No tienes cuenta? ")]),a("b-link",{attrs:{to:{name:"auth-register"}}},[a("span",[t._v("Registrarme")])])],1),a("div",{staticClass:"divider my-2"},[a("div",{staticClass:"divider-text"},[t._v("Iniciar sesión con")])]),a("div",{staticClass:"auth-footer-btn d-flex justify-content-center"},[a("login-google")],1),a("div",{staticClass:"mt-2"},[a("center",[a("soporte-whatsapp")],1)],1)],1)],1)],1),t._m(0)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logoLogin"},[a("img",{attrs:{src:"https://res.cloudinary.com/dumnq4c3n/image/upload/v1691097448/Recurso_5_2x_c2hbwd.png",alt:""}})])}],o=a("c7eb"),s=a("1da1"),i=(a("d3b7"),a("159b"),a("b64b"),a("ac1f"),a("5319"),a("7bb1")),c=a("4c93"),l=a("088b"),u=a("b91d"),p={methods:{setUserData:function(){var t=this;return new Promise((function(e,a){t.$store.dispatch("authModule/getUserdata").then(function(){var a=Object(s["a"])(Object(o["a"])().mark((function a(n){var r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=n.userData,t.$store.commit("userData/UPDATE_USER_DATA",r),t.$ability.update(r.ability),e(r);case 4:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(t){a(t)}))}))}}},d=a("4360"),f=a("8b71"),b=a("223c"),m=a("157f"),g=a("b7b7"),v=a("2bb3"),h=a("1dff"),w={components:{VuexyLogo:l["a"],"soporte-whatsapp":m["a"],"login-google":g["a"],ValidationProvider:i["b"],ValidationObserver:i["a"]},mixins:[u["a"],p],setup:function(){var t=h["c"].app,e=(t.appName,t.appLogoImage);return{appLogoImage:e}},data:function(){return Object(i["e"])("eager"),Object.keys(c).forEach((function(t){Object(i["c"])(t,c[t])})),{login:{email:null,password:null},overlay:!1,status:"",isConnected:!1,name:"",email:"",personalID:"",picture:"",sideImg:a("94a1"),imageLogo:a("cea3")}},provide:function(){var t=this;return{overlay:function(e){t.overlay=e}}},computed:{passwordToggleIcon:function(){return"password"===this.passwordFieldType?"EyeIcon":"EyeOffIcon"},imgUrl:function(){return"dark"===d["a"].state.appConfig.layout.skin?(this.sideImg=a("ff0f"),this.sideImg):this.sideImg}},methods:{onSubmit:function(){var t=this;return Object(s["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.overlay=!0,e.next=3,t.$http.post(v["a"].URL_API+"/api/login",t.login).then(function(){var e=Object(s["a"])(Object(o["a"])().mark((function e(a){var n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.data.token,Object.assign(localStorage,{accessToken:n.access_token,refreshToken:n.refresh_token}),e.next=4,t.setUserData().then(function(){var e=Object(s["a"])(Object(o["a"])().mark((function e(a){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$router.replace(Object(f["a"])(a.role.slug)).then((function(){t.overlay=!1,t.$toast({component:b["a"],props:{title:"Bienvenido",icon:"CheckCircleIcon",text:a.username,variant:"success"}})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),t.$toast({component:b["a"],props:{title:"Algo salio mal",icon:"AlertCircleIcon",text:"Si el problema persiste recarga la pagina o comunica con soporte",variant:"danger"}})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(s["a"])(Object(o["a"])().mark((function e(a){var n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.error(a),n=a.response.data,e.next=4,t.$swal({title:"Alerta de verificación",text:n.errorMessage,icon:404===n.status?"info":"warning",showDenyButton:404===n.status,showConfirmButton:404!==n.status,customClass:{denyButton:"btn btn-info",confirmButton:"btn btn-warning"},confirmButtonText:"Cerrar",denyButtonText:"Registrarme",buttonsStyling:!1}).then((function(e){e.isDenied&&t.$router.replace({path:"/register"})}));case 4:t.overlay=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))()}}},y=w,k=(a("c1cb"),a("0e40"),a("2877")),x=Object(k["a"])(y,n,r,!1,null,"564d4fdb",null);e["default"]=x.exports},"0e40":function(t,e,a){"use strict";a("3d7d")},"355b":function(t,e,a){},"3d7d":function(t,e,a){},"94a1":function(t,e,a){t.exports=a.p+"img/login.bdbddbe7.svg"},c1cb:function(t,e,a){"use strict";a("355b")},cea3:function(t,e,a){t.exports=a.p+"img/logo_crmred.9c829b6e.png"},ff0f:function(t,e,a){t.exports=a.p+"img/login-v2-dark.684bd68d.svg"}}]);
//# sourceMappingURL=chunk-7e4a321c.852dee9f.js.map