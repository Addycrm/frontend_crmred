(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f5bfa3e"],{"138a":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vModal",class:{sideBar:t.sideBar,sideBarOverlay:t.sideBarOverlay},style:t.sideBar?{maxWidth:t.maxWidth[t.size]+"px",left:"auto",width:"100%"}:{overflowY:"auto"}},[a("div",{staticClass:"sideBarOverlay"}),a("div",{ref:"overlay",staticClass:"vModelOverlay"},[a("div",{staticClass:"vModalContainer",style:t.sideBar?{}:{maxWidth:t.maxWidth[t.size]+"px"}},[a("div",{staticClass:"vModalHeader"},[a("span",{staticClass:"text"},[t._v(t._s(t.titulo))]),a("div",{staticClass:"icons d-flex align-items-center justify-content-end flex-grow-1"},[t._t("optiosnHeader"),t.closeActive?a("a",{staticClass:"vModalClose",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.closeModal(e)}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"}},[a("path",{attrs:{d:"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"}})])]):t._e()],2)]),a("div",{staticClass:"vModelContent"},[t._t("default")],2),t.footer?a("div",{staticClass:"vModalFooter"},[t._t("footer")],2):t._e()])])])},i=[],n={name:"vModal",props:{titulo:{type:String,default:"Titulo"},size:{type:String,default:"sm"},footer:{type:Boolean,default:!1},overlayClose:Boolean,sideBarOverlay:Boolean,sideBar:Boolean},data:function(){return{closeActive:!0,element:null}},computed:{maxWidth:function(){return{xxs:450,xs:700,sm:800,md:920,lg:1400}},closeOverlay:function(){var t=this;return function(e){var a=t.$refs["overlay"];e.target==a&&t.closeModal()}}},mounted:function(){this.sideBar||document.body.insertBefore(this.$el,null),this.sideBar&&!this.sideBarOverlay||(document.body.style.overflowY="hidden"),this.overlayClose&&window.addEventListener("click",this.closeOverlay)},destroyed:function(){document.body.style.overflowY="",this.overlayClose&&window.removeEventListener("click",this.closeOverlay)},methods:{closeModal:function(t){this.$emit("close",t)},closeState:function(t){[void 0,null,""].indexOf(t)?this.closeActive=t:this.closeActive=!this.closeActive}}},r=n,s=(a("b991"),a("2877")),l=Object(s["a"])(r,o,i,!1,null,"c9f22e20",null);e["a"]=l.exports},"1a52":function(t,e,a){"use strict";a("433c")},"24f4":function(t,e,a){},"433c":function(t,e,a){},"6a5c":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"OpcionesInmueble"}},[a("b-container",[a("buttonRegister",{attrs:{"greeting-message":this.$route.params.id,type:"city"}}),t._l(t.goodTable,(function(e,o){return a("b-card",{key:o},[a("h3",{staticClass:"mb-2"},[t._v(" "+t._s(e.titulo)+" ")]),a("VueGoodTable",t._b({attrs:{styleClass:"vgt-table striped","search-options":{enabled:!0,placeholder:"Buscar..."}},scopedSlots:t._u([{key:"table-row",fn:function(o){return["name"==o.column.field?a("span",[a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"title-tab",attrs:{title:o.formattedRow[o.column.field]}},[t._v(" "+t._s(o.formattedRow[o.column.field])+" ")])]):"actions"===o.column.field?a("span",{staticClass:"d-flex"},[a("b-button",{staticClass:"m-10",attrs:{size:"sm",variant:"info",disabled:0==t.portales.length},on:{click:function(a){return t.openModal(o.row,e.config)}}},[t._v(" Portales ")]),a("b-button",{staticClass:"m-10",attrs:{size:"sm",to:{name:"localidades-zonas",params:{id:o.row.id}},variant:"warning"}},[a("span",{staticClass:"align-middle"},[t._v("Zonas")])]),a("b-button",{staticClass:"m-10",attrs:{size:"sm",variant:"success"},on:{click:function(e){return t.showModalLocal(o.row.id)}}},[t._v("Localidades")])],1):a("span",[t._v(" "+t._s(o.formattedRow[o.column.field])+" ")])]}},{key:"pagination-bottom",fn:function(o){return[a("div",{staticClass:"d-flex flex-wrap align-items-center mt-1"},[a("div",{staticClass:"d-flex align-items-center"},[a("span",{staticClass:"text-nowrap"},[t._v(" Mostrando 1 a ")]),a("b-form-select",{staticClass:"mx-1",attrs:{options:["10","20","100"]},on:{input:function(t){return o.perPageChanged({currentPerPage:t})}},model:{value:e.tabla.paginationOptions.perPage,callback:function(a){t.$set(e.tabla.paginationOptions,"perPage",a)},expression:"item.tabla.paginationOptions.perPage"}}),a("span",{staticClass:"text-nowrap"},[t._v(" de "+t._s(o.total)+" registros ")])],1),o.total>e.tabla.paginationOptions.perPage?a("div",{staticClass:"d-flex ml-auto"},[a("b-pagination",{staticClass:"mb-0",attrs:{value:1,"total-rows":o.total,"per-page":e.tabla.paginationOptions.perPage,"first-number":"","last-number":"",align:"right","prev-class":"prev-item","next-class":"next-item"},on:{input:function(t){return o.pageChanged({currentPage:t})}},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})]},proxy:!0}],null,!0)})],1):t._e()])]}}],null,!0)},"VueGoodTable",e.tabla,!1))],1)}))],2),a("transition",{attrs:{name:"fade"}},[t.modal.state?a("v-modal",{attrs:{titulo:"Portales",size:"sm",footer:""},on:{close:function(e){t.modal.state=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("b-overlay",{attrs:{show:t.overlay}},[a("b-button",{attrs:{variant:"info"},on:{click:t.onSubmit}},[t._v(" Guardar ")])],1)]},proxy:!0}],null,!1,2860457135)},[a("FormCodePortales",t._b({ref:"FormCodePortales",tag:"component"},"component",t.modal,!1))],1):t._e()],1),a("modalLocal",{ref:"modalLocal"})],1)},i=[],n=a("c7eb"),r=a("1da1"),s=a("4a7a"),l=a.n(s),c=a("138a"),d=a("b641"),u=a("f617"),f=a("223c"),m=a("a17e"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{ref:"my-modal",attrs:{"hide-footer":"",title:"Lista de Localidades"}},[a("b-button",{staticClass:"m-10",attrs:{size:"md",variant:"relief-success"},on:{click:t.createLocation}},[a("span",{staticClass:"align-middle"},[t._v("Crear Localidad")])]),a("div",{staticClass:"container"},[a("div",[a("b-table",{attrs:{hover:"",items:t.data,fields:t.fields,"show-empty":"",responsive:""},scopedSlots:t._u([{key:"empty",fn:function(e){return[a("h4",[t._v("No hay localidades disponibles")])]}}])})],1)])],1),a("modalCreateLocation",{ref:"createLocation"})],1)},b=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("b-modal",{directives:[{name:"s",rawName:"v-s"}],ref:"modal-create-loca",attrs:{"hide-footer":"",title:"Crear Localidades"}},[a("div",[a("b-form",{on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Codigo Ciencuadras:","label-for":"input-1","label-size":"md",description:"ingresar el numero de codigo cien cuadras."}},[a("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Ingrese el Codigo",required:""},model:{value:t.form.codigo,callback:function(e){t.$set(t.form,"codigo",e)},expression:"form.codigo"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Nombre de Localidad:","label-for":"input-2","label-size":"md"}},[a("b-form-input",{attrs:{id:"input-2",placeholder:"Ingrese el Nombre",required:""},model:{value:t.form.nombre,callback:function(e){t.$set(t.form,"nombre",e)},expression:"form.nombre"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Crear")])],1)],1)])],1)},h=[],g={data:function(){return{idCity:null,form:{codigo:null,id_city:null,nombre:""}}},methods:{showModal:function(t){this.idCity=t,this.$refs["modal-create-loca"].show()},callCreateLocation:function(){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){var a;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/api/auth/ciencuadra/import/localidades",e.next=3,t.$http.post(a,t.form).then((function(e){t.$root.$emit("update-location"),t.$refs["modal-create-loca"].hide(),t.$toast({component:f["a"],props:{title:"Registro",icon:"CheckCircleIcon",text:e.data.data.message,variant:"success"}})})).catch((function(e){t.$toast({component:f["a"],props:{title:"error",icon:"CheckCircleIcon",text:result.data.data.message,variant:"danger"}})}));case 3:case"end":return e.stop()}}),e)})))()},onSubmit:function(t){t.preventDefault(),this.form.id_city=this.idCity,this.callCreateLocation(),this.form.codigo=null,this.form.id_city=null,this.form.nombre=null}}},y=g,C=a("2877"),w=Object(C["a"])(y,v,h,!1,null,null,null),x=w.exports,_={components:{modalCreateLocation:x},data:function(){return{data:[],idCity:null,fields:[{key:"id",label:"codigo"},{key:"id_city",label:"codigo de ciudad"},{key:"nombre",label:"localidad"}]}},mounted:function(){var t=this;this.$root.$on("update-location",(function(){t.callApiList()}))},methods:{showModal:function(t){this.idCity=t,this.$refs["my-modal"].show(),this.callApiList()},callApiList:function(){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){var a;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/api/auth/ciencuadra/import/localidades/",e.next=3,t.$http.get(a+t.idCity).then((function(e){t.data=e.data.data.localidades}));case 3:case"end":return e.stop()}}),e)})))()},createLocation:function(){return this.$refs.createLocation.showModal(this.idCity)}}},O=_,k=Object(C["a"])(O,p,b,!1,null,null,null),$=k.exports,L={name:"LocalidadesPaises",components:{VModal:c["a"],vSelect:l.a,FormCodePortales:d["a"],VueGoodTable:u["a"],buttonRegister:m["a"],modalLocal:$},data:function(){return{overlay:!1,modal:{state:!1}}},computed:{ciudades:function(){return this.$store.state.appLocalidades.ciudades},portales:function(){return this.$store.state.appPortales.portales},goodTable:function(){return[{titulo:"Ciudades",config:{prop:"portales_cities",config:{url:"api/auth/portales/cities_portal",method:"post"}},tabla:{columns:[{field:"id",label:"ID",width:"6em"},{field:"name",label:"Ciudad"},{field:"actions",label:"Acciones",width:"10em"}],rows:this.ciudades,paginationOptions:{enabled:!0,perPage:10}}}]}},mounted:function(){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("appPortales/fetchPortales");case 2:t.$store.dispatch("appLocalidades/getCiudades",{codigo:t.$route.params.id});case 3:case"end":return e.stop()}}),e)})))()},methods:{onSubmit:function(){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.overlay=!0,e.next=3,t.$refs["FormCodePortales"].onSubmit().then((function(e){var a={title:"Algo ha ocurrido",icon:"AlertCircleIcon",text:"Actualiza el navegador. Si el problema persiste comunicate con nosotros",variant:"danger"};e&&(t.modal.state=!1,a={title:"Actualizacion exitosa",icon:"CheckCircleIcon",text:"Tus datos se han actualizado exitosamente",variant:"success"}),t.$toast({component:f["a"],props:a})}));case 3:t.overlay=!1;case 4:case"end":return e.stop()}}),e)})))()},showModalLocal:function(t){return this.$refs.modalLocal.showModal(t)},openModal:function(t,e){Object.assign(this.modal,{state:!0,row:t},e)}}},j=L,M=(a("9f85"),Object(C["a"])(j,o,i,!1,null,"0894a7ad",null));e["default"]=M.exports},"94cb":function(t,e,a){},"9f85":function(t,e,a){"use strict";a("24f4")},a17e:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-search d-flex justify-content"},[a("b-form-group",[a("div",{staticClass:"d-flex align-items-center"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.localidadModal",modifiers:{localidadModal:!0}}],attrs:{variant:"relief-success"}},[t._v(" Registrar ")])],1)]),a("b-modal",{ref:"localidadModal",attrs:{id:"localidadModal",title:"Registro","ok-only":"","ok-title":"Enviar","cancel-variant":"outline-secondary"},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[a("b-card-text",[a("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[a("b-form-group",{attrs:{state:t.nameState,label:"Nombre","label-for":"name-input","invalid-feedback":"Nombre es requerido"}},[a("b-form-input",{attrs:{id:"name-input",name:"Nombre",state:t.nameState,required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1)])],1)],1)},i=[],n=a("c7eb"),r=a("1da1"),s=(a("b0c0"),a("223c")),l={name:"buttonRegister",data:function(){return{name:"",nameState:null}},props:{greetingMessage:String,type:String},methods:{checkFormValidity:function(){var t=this.$refs.form.checkValidity();return this.nameState=t,t},resetModal:function(){this.name="",this.code=null},handleOk:function(t){var e=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var o,i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),e.checkFormValidity()){a.next=3;break}return a.abrupt("return");case 3:o="",i="",a.t0=e.type,a.next="dep"===a.t0?8:"city"===a.t0?11:"zone"===a.t0?14:"barrio"===a.t0?17:20;break;case 8:return o="state",i="SET_STATE",a.abrupt("break",21);case 11:return o="ciudades",i="SET_CITY",a.abrupt("break",21);case 14:return o="zona",i="SET_ZONA",a.abrupt("break",21);case 17:return o="barrio",i="SET_BARRIO",a.abrupt("break",21);case 20:return a.abrupt("break",21);case 21:return a.next=23,e.$http({url:"api/auth/localidad/"+o,method:"post",data:{name:e.name,code:e.greetingMessage}}).then((function(t){e.$store.commit("appLocalidades/"+i,t.data.data),e.toash("success","Se registro correctamente")})).catch((function(t){e.toash("danger","Ocurrio un error interno por favor intentalo de nuevo")}));case 23:e.$refs["localidadModal"].hide();case 24:case"end":return a.stop()}}),a)})))()},toash:function(t,e){this.$toast({component:s["a"],props:{title:e,icon:"EditIcon",variant:t}})}}},c=l,d=a("2877"),u=Object(d["a"])(c,o,i,!1,null,null,null);e["a"]=u.exports},b641:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"FormCodePortales"}},[a("b-form",[a("ul",{staticClass:"portales-inmueble"},[t._l(t.portales,(function(e){return t.portales.length>0?[a("li",{key:e.id,staticClass:"item-portales-inmueble"},[a("img",{attrs:{src:e.image,alt:"",srcset:""}}),e.value?a("b-form-input",{staticClass:"mt-1 mx-auto text-center",attrs:{size:"sm"},model:{value:e.value.codigo,callback:function(a){t.$set(e.value,"codigo",a)},expression:"item.value.codigo"}}):t._e()],1)]:t._e()}))],2)])],1)},i=[],n=a("ade3"),r=a("b85c"),s=(a("d3b7"),a("4360"),{props:{config:Object,row:Object,prop:String},mounted:function(){this.setCode()},computed:{portales:function(){return this.$store.state.appPortales.portales}},methods:{setCode:function(){var t,e=Object(r["a"])(this.portales);try{for(e.s();!(t=e.n()).done;){var a=t.value;a.value.codigo=null;var o,i=Object(r["a"])(this.row[this.prop]);try{for(i.s();!(o=i.n()).done;){var n=o.value;a.id==n.portale_id&&Object.assign(a.value,{codigo:n.codigo})}}catch(s){i.e(s)}finally{i.f()}}}catch(s){e.e(s)}finally{e.f()}},onSubmit:function(){var t,e=this,a=[],o=Object(r["a"])(this.portales);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.value.codigo&&a.push(i.value)}}catch(l){o.e(l)}finally{o.f()}var s={portales:a,id:this.row.id};return Object.assign(this.config,{data:s}),new Promise((function(t){e.$http(e.config).then((function(a){Object.assign(e.row,Object(n["a"])({},e.prop,a.data.data)),t(!0)})).catch((function(e){console.error(e),t(!1)}))}))}}}),l=s,c=(a("1a52"),a("2877")),d=Object(c["a"])(l,o,i,!1,null,"6c3b5d5f",null);e["a"]=d.exports},b991:function(t,e,a){"use strict";a("94cb")}}]);
//# sourceMappingURL=chunk-3f5bfa3e.519eaf88.js.map